(window.webpackJsonp=window.webpackJsonp||[]).push([[58,54],{"1RVd":function(e,t,s){"use strict";s.r(t),s.d(t,"InlineComposeContainer",(function(){return h}));var r=s("97Jx"),n=s.n(r),a=s("ERkP"),i=s("GVND"),o=s("Ub51"),c=s("MWbm"),d=s("cHvH"),l=s("rHpw");const h=({getTweetHeight:e,history:t,location:s,richTextInputContext:r,typeaheadWrapper:l,parentTweetId:h,replyPressToggle:u})=>a.createElement(d.a,null,({windowWidth:d})=>a.createElement(i.a.Consumer,null,i=>a.createElement(c.a,{style:p.root},a.createElement(o.a,n()({},i,{getTweetHeight:e,history:t,isInline:!0,location:s,parentTweetId:h,replyPressToggle:u,richTextInputContext:r,typeaheadWrapper:l,windowWidth:d}))))),p=l.a.create(e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}}));t.default=h},M5JI:function(e,t,s){"use strict";s.r(t);var r=s("1RVd"),n=s("SADN");t.default=Object(n.a)(r.default)},SADN:function(e,t,s){"use strict";var r=s("97Jx"),n=s.n(r),a=s("ERkP"),i=s("RH6X"),o=s("rziq"),c=s("hHEM"),d=s("keCP");const l={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:o.a,sendTweetCommandName:o.b};t.a=e=>t=>a.createElement(e,n()({},t,{richTextInputContext:l,typeaheadWrapper:i.a}))},XpKj:function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"e",(function(){return u})),s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return g}));s("IAdD");var r=s("kGix"),n=s("Ssj5"),a=s("oEOe");const i={fetchStatus:r.a.NONE,scheduledTweets:[]},o="FETCH_SCHEDULED_TWEETS",c=Object(a.a)("rweb/scheduledTweets",o),d="DELETE_SCHEDULED_TWEET",l=Object(a.a)("rweb/scheduledTweets",d);function h(e=i,t){switch(t.type){case c.SUCCESS:return Object.assign({},e,{fetchStatus:r.a.LOADED,scheduledTweets:t.payload});case c.FAILURE:return Object.assign({},e,{fetchStatus:r.a.FAILED});case c.REQUEST:return Object.assign({},e,{fetchStatus:r.a.LOADING});case l.SUCCESS:{const{meta:r}=t;return r&&r.deleteScheduledTweetId?Object.assign({},e,{scheduledTweets:(s=r.deleteScheduledTweetId,n=e.scheduledTweets,n.filter(e=>e.rest_id!==s))}):e}default:return e}var s,n}n.a.register({scheduledTweets:h});const p=e=>e.scheduledTweets.scheduledTweets,u=e=>e.scheduledTweets.fetchStatus,m=()=>(e,t,{api:s})=>Object(a.b)(e,{request:s.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:o}).then(()=>{}),g=e=>(t,s,{api:r})=>Object(a.b)(t,{request:r.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:l,context:d,meta:{deleteScheduledTweetId:e}})},pcjM:function(e,t,s){"use strict";s.r(t),s.d(t,"Compose",(function(){return ie}));s("IAdD"),s("kYxP");var r=s("97Jx"),n=s.n(r),a=s("LdEA"),i=s.n(a),o=s("KEM+"),c=s.n(o),d=s("ERkP"),l=s("HPNB"),h=(s("VAZu"),s("Ub51")),p=s("zh9S"),u=s("ge3j"),m=s("pidX"),g=s("0KEI"),T=s("AspN"),f=s("XOJV"),w=s("G6rE"),S=s("oEGd"),E=s("hqKg"),R=s("rU/Q"),b=s("XpKj");const y=e=>(t,s)=>{const r=((e,t)=>t.location.state)(0,s);return r?e(r):void 0},_=Object(E.createSelector)((e,t)=>t.activeUser,w.e.selectLoggedInUser,(e,t)=>e||t),C=(e,t)=>{const{location:{query:s}}=t;return s&&"string"==typeof s.in_reply_to?s.in_reply_to:void 0},I=y(e=>e.inReplyToStatusId),O=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,D=y(e=>e.defaultText),H=y(e=>e.quotedStatus),j=y(e=>e.isSelfThreadReply),x=Object(E.createSelector)(e=>u.l(e,""),(e,t)=>{const s=D(e,t);return Object(m.a)(t.location)||s},(e,t)=>t.quotedStatus?t.quotedStatus:H(e,t),T.f,O,(e,t,s,r,n)=>e.map((e,a)=>{return Object.assign({},(o=e,i()(o,["mediaIds","cardUrl"])),{media:r.filter(t=>e.mediaIds.some(e=>e===t.id)),quotedStatus:0===a?s:void 0,text:0===a&&t&&!n?t:e.text});var o})),A=Object(E.createStructuredSelector)({activeUser:_,composerData:x,draftTweets:R.e,inReplyToStatus:(e,t)=>{const s=C(0,t)||I(e,t);return s?f.a.selectHydrated(e,s):void 0},inReplyToStatusId:C,isIntentRoute:O,isSelfThreadReply:j,isSending:e=>u.o(e,""),scheduledTweets:b.f,sendingProgress:u.q,composeSemanticCoreId:y(e=>e.composeSemanticCoreId)}),v={createDraftTweetApiErrorHandler:Object(g.d)(R.d),createScheduledTweetApiErrorHandler:Object(g.d)(b.d),googleAnalyticsPageView:p.a,scribePageImpression:p.d,fetchScheduledTweets:b.c,fetchDraftTweets:R.c};var B=Object(S.g)(A,v),U=s("RgK2"),P=s.n(U),k=s("jHSc"),M=s("MXY2"),N=s("3XMw"),V=s.n(N),W=s("iFPY"),q=s("QbaN"),L=s("oQhu"),J=s("7nmT"),Q=s.n(J),F=s("Dtul"),X=s("7JQg"),z="tweetButton",K=s("MWbm"),G=s("/yvb"),Y=s("JYMr"),Z=s("cHvH"),$=s("7N4s"),ee=s("rHpw");const te=V.a.b8f0483e,se=V.a.a133d13e,re={page:"compose"},ne={page:"compose",section:"reply"},ae={context:"compose_intent_logged_in"};class ie extends d.Component{constructor(...e){super(...e),c()(this,"state",{isValid:!1}),c()(this,"_handleAppBarHeight",Object(L.a)(()=>{const e=Q.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50})),c()(this,"_handleBackClick",()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()}),c()(this,"_handleCloseComposer",()=>{this._appBarRef&&this._appBarRef.goBack()}),c()(this,"_handleSendTweet",()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()}),c()(this,"_setValidity",e=>{e!==this.state.isValid&&this.setState({isValid:e})}),c()(this,"_getScribeNamespace",()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?ne:re),c()(this,"_getScribeData",()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?ae:P.a}),c()(this,"_renderAppBarRightControl",()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{inReplyToStatus:s,isSelfThreadReply:r,isSending:n,activeUser:a}=this.props,i=e||this.isRetweet;return t?void 0:d.createElement(G.a,{disabled:!i||n||!a,onPress:this._handleSendTweet,size:"normalCompact",testID:z,type:"primary"},Object(M.a)({inReplyToStatus:!!s,isSelfThreadReply:!!r,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread}))}),c()(this,"_renderHeaderWithProgressBar",e=>{const{isModal:t}=this.context,{sendingProgress:s,isSending:r}=this.props;return d.createElement(d.Fragment,null,d.createElement(Y.a,{progress:r?Math.max(s,.02):0,style:[oe.progressBar,t&&oe.progressBarModal]}),e)}),c()(this,"_renderUnsentHeading",()=>{const{draftTweets:e,scheduledTweets:t}=this.props;if(t.length>0||e.length>0)return d.createElement(K.a,{style:oe.unsentHeadingContainer},d.createElement(G.a,{onPress:this._handleOpenUnsent,size:"normalCompact",type:"text"},se))}),c()(this,"_handleOpenUnsent",()=>{const{history:e}=this.props;Object(p.c)(Object.assign({},this._getScribeNamespace(),{element:"unsent_tweets",action:"click"})),e.push("/compose/tweet/unsent/drafts")}),c()(this,"_setAppBarRef",e=>{this._appBarRef=e}),c()(this,"_handleComposeContainerRef",e=>{this._composeContainerRef=e})}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:s,fetchDraftTweets:r,fetchScheduledTweets:n,googleAnalyticsPageView:a,scribePageImpression:i}=this.props,o=this._getScribeNamespace();i(o),a(o),this._unlockReload=F.a.acquire(),e&&(n().catch(s()),r().catch(t()))}componentWillUnmount(){this._unlockReload()}render(){const e=this.props,{history:t,location:s,activeUser:r,isIntentRoute:a}=e,o=i()(e,["createDraftTweetApiErrorHandler","createScheduledTweetApiErrorHandler","draftTweets","fetchDraftTweets","fetchScheduledTweets","history","location","activeUser","composerData","googleAnalyticsPageView","inReplyToStatus","inReplyToStatusId","isIntentRoute","isSelfThreadReply","isSending","match","scheduledTweets","scribePageImpression","sendingProgress","staticContext"]),c=a&&!r;return d.createElement(X.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},d.createElement(Z.a,null,({windowWidth:e})=>{const a=c&&l.a.shouldRenderAsModal(e);return d.createElement(d.Fragment,null,c&&d.createElement(W.a,{history:t,location:s}),!a&&d.createElement(k.b,{appBarRef:this._setAppBarRef,documentTitle:te,hideBackButton:!1,history:t,middleControl:this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl()},d.createElement(h.a,n()({},o,{activeUser:r,history:t,location:s,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,setValidity:this._setValidity,windowWidth:e}))))}))}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(q.h)(e[0].scheduledFor)}}c()(ie,"contextType",$.a);const oe=ee.a.create(e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.medium,borderTopRightRadius:e.borderRadii.medium,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}}));t.default=B(ie)},ynU0:function(e,t,s){"use strict";s.r(t);var r=s("pcjM"),n=s("SADN");t.default=Object(n.a)(r.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.8e8ea2a5.js.map