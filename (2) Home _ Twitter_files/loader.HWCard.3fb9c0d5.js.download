(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{"aX4+":function(e,t,a){"use strict";a.r(t),a.d(t,"HWCard",(function(){return tr}));a("IAdD"),a("kYxP");var i=a("LdEA"),r=a.n(i),n=a("97Jx"),o=a.n(n),s=a("KEM+"),d=a.n(s),l=a("+/5o"),c=a("ERkP"),_=a("v6aA"),p=a("SMZj"),u=a("Tb0w"),m=a("6rlp"),g=a("vjRr"),h=a("rxPX"),y=a("0KEI"),v=a("P1r1"),b=a("oEOe"),C=a("/kEJ");const w=b.a("rweb/cards",""),f=(e,t)=>(a,i,{api:r})=>b.b(a,{params:{ids:[t]},request:r.Broadcasts.fetchBroadcast})({actionTypes:w,context:"FETCH_BROADCAST",meta:{}},t=>{if(t){const a=t.result.broadcasts[0],r=t.entities.broadcasts[a],n=g.a.select(i(),e);if(!n)return[];const o=I(r,n);return[Object(C.c)({cards:{[e]:Object.assign({},o)}})]}}),I=(e,t)=>{const{pre_live_slate_url:a,scheduled_start_ms:i,state:r,status:n,twitter_user_id:o,user_display_name:s}=e,{hw_card_binding_values:d}=t;return{hw_card_binding_values:Object.assign({},d,{broadcast_state:{type:"STRING",string_value:r},broadcast_title:{type:"STRING",string_value:n},site:{type:"USER",user_value:{id_str:o}},broadcaster_display_name:{type:"STRING",string_value:s},broadcast_scheduled_start_time:{type:"STRING",string_value:i}},a?{broadcast_pre_live_slate:{type:"IMAGE",image_value:{url:a}}}:null)}},x=(e,t)=>{var a;return t.cardState||(null==(a=u.b(e,t.card.url))?void 0:a.cardState)},S=(e,t)=>{var a;return t.initialCarouselIndex||(null==(a=u.b(e,t.card.url))?void 0:a.carouselIndex)},k=(e,t)=>t.card.binding_values.broadcast_id&&"STRING"===t.card.binding_values.broadcast_id.type?t.card.binding_values.broadcast_id.string_value:void 0;var E=Object(h.a)().propsFromState(()=>({cardState:x,initialCarouselIndex:S,isDataSaverEnabled:v.j,broadcastId:k})).propsFromActions(()=>({createLocalApiErrorHandler:Object(y.d)("CARD_CONTAINER"),requestCardUpdate:g.a.fetchOne,log:m.a,updateBroadcastCard:f,vote:g.a.vote,remindMeButtonSubscribe:g.a.eventSubscribe,remindMeButtonUnsubscribe:g.a.eventUnsubscribe,updateCardState:u.c})).withAnalytics({element:"platform_card"}),L=a("TrHT"),R=a("wrlS"),T=a("F3pd");var P=(e,t,a,i)=>{switch(e){case"card_url_click":return{event:"card_url_click"};case"install_app":return{event:"install_app"};case"dm_button_click":return{event:"card_url_click",engagement_metadata:JSON.stringify({direct_message_card_details:{button_index:a}})};case"convo_button_click":return{event:"card_click",engagement_metadata:JSON.stringify({conversational_card_details:{button_index:a}})};case"poll_card_vote":return{event:"poll_card_vote"};case"unified_card_component_url_click":return Object.assign({event:"unified_card",uc_event:JSON.stringify({event:"click",component:t,destination:"browser"})},"button_group"===t||i?{engagement_metadata:JSON.stringify(Object.assign({uc_button_group_details:{button_index:a}},i?{uc_event_metadata:i}:null))}:null);case"unified_card_component_app_store_click":return{event:"unified_card",uc_event:JSON.stringify({event:"click",component:"details"===t?"app_store_details":t,destination:"app_store"}),engagement_metadata:JSON.stringify({uc_event_metadata:Object.assign({},i,{app_event:"install_app"},"button_group"===t?{button_index:a}:null)})};case"unified_card_carousel_swipe_next":case"unified_card_carousel_swipe_previous":return{event:"unified_card",uc_event:JSON.stringify({event:"unified_card_carousel_swipe_next"===e?"swipe_next":"swipe_previous",component:t}),engagement_metadata:JSON.stringify({uc_event_metadata:i})};default:return null}},M=a("3XMw"),O=a.n(M);const D=O.a.d37a42ad,j=O.a.c2818323,B=O.a.ef1f709d,A=O.a.ia24dc8c,z=O.a.ecd234cd,U=O.a.d1318fbc;var W=a("nT9l"),F=a("aITJ"),N=a("TIdA"),V=a("A91F");const q={composeDirectMessage:({recipient:e,welcomeMessageId:t,messageText:a})=>{},composeTweet:(e,t,a)=>{},getCtaString:e=>{switch(e){case"play":return"Play";case"shop":return"Shop";case"book":return"Book";case"connect":return"Connect";case"order":return"Order";case"open":return"Open";case"install":default:return"Install"}},getFetchIntervalSeconds:()=>30,getMessageMeString:e=>{switch(e){case"message_me_card_cta_1":return"Message us";case"message_me_card_cta_3":return"Send us a private message";case"message_me_card_cta_4":return"Send me a private message";case"message_me_card_cta_2":default:return"Send a private message"}},getMobileOS:()=>"android",getBroadcastLink:e=>"https://twitter.com/i/broadcasts/"+e,getEventLink:e=>"https://twitter.com/i/events/"+e,getMomentLink:e=>"https://twitter.com/i/moments/"+e,renderImage:(e,t,a,i,r,n)=>{const{uri:o,width:s,height:d}=e;return c.createElement(N.a,{accessibilityLabel:n,aspectMode:V.a.exact(t||1),cropCandidates:r,image:{url:o,width:s||1e3,height:d||1e3}})},renderTwemojiText:e=>e,renderNumVotesLabel:e=>`${e.toLocaleString()} vote${1===e?"":"s"}`,renderFinalResultsLabel:()=>"Final results",renderRatingsLabel:({appStarRating:e,appNumRatings:t})=>`${e}/5.0 stars â€“ ${t} ratings`,renderStartingTimeLabel:e=>"Starting "+new Date(parseInt(e,10)).toLocaleString("default",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),renderTimeLeftLabel:e=>"Ends at "+new Date(e).toLocaleString(),renderTweetActionLabel:e=>"Tweet "+e,renderVoteLabel:()=>"Vote",shouldLimitTextToSingleLine:()=>!1,storeCardState:(e,t)=>{},storeCarouselIndex:(e,t)=>{}};var $=e=>{for(const t in e)q[t]=e[t]},G=a("t62R");let H=!1;const J=O.a.ic1e826e,K=O.a.c8b4bcaf,X=O.a.b62956a9,Q=O.a.b5298d91,Y=O.a.i3ea806a,Z=O.a.fd00a769,ee=O.a.e0aa5848,te=O.a.d3f6b1a6,ae=O.a.b0e322cc,ie=O.a.cb8bddc7,re=O.a.cb8c547e,ne=O.a.d980e29e,oe=O.a.f93bb3ee,se=O.a.fc209bb7,de=F.a.isIOS()?"ios":F.a.isAndroid()?"android":"other",le={},ce=e=>(t,a,i)=>{const r=0===t.indexOf("card://"),n=a||!r?`${a||""}${a&&!r?" ":""}${r?"":t}`:null;e.push(Object.assign({pathname:"/compose/tweet"},n?{query:{text:n}}:null,{state:{convoCardData:{cardId:t,cardUrl:r?t:null,nextState:i}}}))};function _e(e){H||(H=!0,$(function({history:e,updateCardState:t}){return[{composeDirectMessage:({recipient:t,welcomeMessageId:a,messageText:i})=>{const r={recipient_id:t};a&&(r.welcome_message_id=a),i&&(r.text=i),e.push({pathname:"/messages/compose",query:Object.assign({},r)})},composeTweet:ce(e),getFetchIntervalSeconds:()=>30,getCtaString:e=>{switch(e){case"play":return J;case"shop":return K;case"book":return X;case"connect":return Q;case"order":return Y;case"open":return Z;case"install":default:return ee}},getMessageMeString:e=>{switch(e){case"message_me_card_cta_1":return te;case"message_me_card_cta_3":return ie;case"message_me_card_cta_4":return re;case"message_me_card_cta_2":default:return ae}},getMobileOS:()=>de,renderImage:(e,t,a,i,r,n)=>{const{uri:o,width:s,height:d}=e,l=i?(e=>{if(le[e])return le[e];{const t=N.a.createLayoutCache();return le[e]=t,t}})(i):void 0,_=({useMinimumData:e})=>c.createElement(N.a,{accessibilityLabel:n,aspectMode:V.a.exact(t||1),cropCandidates:r,image:{url:o,width:s||1e3,height:d||1e3},layoutCache:l,previewMode:e});return"preview"===a?c.createElement(W.a,{acceptLabel:oe,renderContent:_,resourceId:o}):_({useMinimumData:!1})},renderTwemojiText:e=>c.createElement(G.c,null,e),renderNumVotesLabel:e=>z({count:e,formattedCount:A(e)}),renderFinalResultsLabel:()=>U,renderTimeLeftLabel:e=>(e=>{const t=new Date(e).getTime()-Date.now(),a=Math.floor(t/864e5),i=Math.floor(t/36e5),r=Math.floor(t/6e4);return i>=24?B(O.a.ia24dc8c(a)):r>=60?j(O.a.ia24dc8c(i)):D(O.a.ia24dc8c(r))})(e),renderStartingTimeLabel:e=>{const t=new Date(parseInt(e,10));return ne({date:se(t)})},storeCardState:(e,a)=>t(e,{cardState:a}),storeCarouselIndex:(e,a)=>t(e,{carouselIndex:a})}]}(e)[0]))}a("JtPf");var pe=a("zb92");const ue=Object(pe.a)({loader:()=>a.e(138).then(a.bind(null,"tpds")),renderPlaceholder:()=>null});function me(e){return c.createElement(ue,{player:e})}var ge=a("cFuS"),he=a("Rp9C"),ye=a("Jkc4"),ve={wrapper:"card.wrapper",layoutLarge:{media:"card.layoutLarge.media",detail:"card.layoutLarge.detail"},layoutSmall:{media:"card.layoutSmall.media",detail:"card.layoutSmall.detail"}},be=a("v/3V"),Ce=a("XOJV");const we=(e,t)=>t.media_tweet_id,fe=(e,t)=>{const a=we(0,t);return a?Ce.a.selectFetchStatus(e,a):void 0};var Ie=Object(h.a)().propsFromState(()=>({videoTweetFetchStatus:fe,videoTweet:Ce.a.createHydratedTweetSelector(we)})).propsFromActions(()=>({createLocalApiErrorHandler:Object(y.d)("EVENT_CARD_CONTEXT"),fetchTweetIfNeeded:Ce.a.fetchOneIfNeeded})),xe=a("v//M"),Se=a("W5XZ"),ke=a("fUT7"),Ee=a("Modb"),Le=a("lklz"),Re=a("MWbm"),Te=a("9Xij"),Pe=a("rHpw");const Me=O.a.a1979463;class Oe extends c.Component{constructor(...e){super(...e),d()(this,"_renderInlinePlayer",()=>{var e;const{aspect_ratio:t,event_id:a,media_tweet_id:i,poster_image:r,promotedContent:n,videoTweet:s}=this.props,d=null==s||null==(e=s.extended_entities)?void 0:e.media[0],l=Le.b.forTweet(i);return d?c.createElement(Ee.a,o()({},Object(L.a)(l,d,a),{aspectRatio:t,poster:r,promotedContent:n})):null}),d()(this,"_handleFetchTweet",()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,media_tweet_id:a}=this.props;ke.a.preload(),t(a).catch(e(Se.a))})}componentDidMount(){this._handleFetchTweet()}render(){const{aspect_ratio:e,media_tweet_id:t,videoTweetFetchStatus:a}=this.props;return t?c.createElement(Te.a,{ratio:e},c.createElement(Re.a,{style:Pe.a.absoluteFill},c.createElement(xe.a,{accessibilityLabel:Me,fetchStatus:a,onRequestRetry:this._handleFetchTweet,render:this._renderInlinePlayer}))):null}}var De=Ie(Oe),je=a("TnY3");a("wFPu");class Be extends c.Component{render(){return null}componentDidMount(){this._startTimer()}componentWillUnmount(){this._stopTimer()}_startTimer(){const{requestCardUpdate:e}=this.props,t=q.getFetchIntervalSeconds();this._timer=setInterval(e,1e3*t)}_stopTimer(){clearInterval(this._timer)}}var Ae=Be,ze=(a("jQ/y"),a("/yvb")),Ue=a("oECP");const We="amplify",Fe="app",Ne="appplayer",Ve="745291183405076480:broadcast",qe="direct_store_link_app",$e="2586390716:image_direct_message",Ge="745291183405076480:live_event",He="2586390716:message_me",Je="3260518932:moment",Ke="3691233323:periscope_broadcast",Xe="player",Qe="poll2choice_text_only",Ye="poll3choice_text_only",Ze="poll4choice_text_only",et="poll2choice_image",tt="poll3choice_image",at="poll4choice_image",it="poll2choice_video",rt="poll3choice_video",nt="poll4choice_video",ot="promo_image_app",st="promo_image_convo",dt="promo_video_convo",lt="2586390716:promo_video_website",ct="promo_website",_t="summary",pt="summary_large_image",ut="unified_card",mt="2586390716:video_direct_message",gt="button_group",ht="button_group_static",yt="destination_default",vt="destination_secondary",bt="destination_static",Ct="details_default",wt="details_secondary",ft="details_static",It="media_default",xt="media_secondary",St="media_static",kt="image_entity_default",Et="image_entity_secondary",Lt="image_entity_static",Rt="video_entity_default",Tt="video_entity_secondary",Pt="iframe_entity",Mt="poll",Ot="poll_static",Dt="swipeable_media_static",jt="topic_details",Bt="default",At="secondary",zt="static",Ut="data_saver",Wt="label",Ft="moments",Nt="play",Vt="action",qt="broadcast",$t="browser",Gt="browser_with_docked_media",Ht="browser_with_media",Jt="event",Kt="moment",Xt="media",Qt="details",Yt="button_group",Zt="swipeable_media",ea="twitter_list_details",ta="topic_details";class aa extends c.Component{constructor(...e){super(...e),d()(this,"_extractCardActionParams",(e,t)=>[t&&void 0!==t.index?t.index:void 0,e.type===Vt&&e.data.auth_required]),d()(this,"_scribeAndLogAction",(e,t,a)=>{const{scribeCardAction:i}=this.props,[r,n]=this._extractCardActionParams(e,a);i&&i({action:e.data.scribe,componentType:t,ctaIndex:r,isAuthRequired:n}),this._logPromotedCardAction({action:e.data.promoted_log,componentType:t,ctaIndex:r,isAuthRequired:n})}),d()(this,"_scribeUnifiedCardClick",(e,t,a)=>{const{scribeCardAction:i}=this.props,[r,n]=this._extractCardActionParams(e,a);i&&i({action:"click",element:e.data.scribe_element||void 0,componentType:t,ctaIndex:r,isAuthRequired:n})}),d()(this,"_voteForChoice",e=>{const{card:t,onPollVote:a}=this.props;a&&t&&a({cardId:t.id,choice:e})}),d()(this,"_toggleEventReminder",e=>{const{card:t,onEventReminderClick:a}=this.props;if(e.eventId&&e.notificationId){const{eventId:i,isSelected:r=!1,notificationId:n}=e;a&&t&&a({cardId:t.id,eventId:i,notificationId:n,remindMe:!r})}}),d()(this,"_updateCardStateAndPersistIfNeeded",(e,t,a)=>{const{updateCardState:i}=this.props;a&&(i&&i(a),t&&q.storeCardState(e,a))}),d()(this,"_logPromotedCardAction",({action:e,componentType:t,ctaIndex:a,isAuthRequired:i})=>{const{card:r,onPromotedLogEvent:n}=this.props;r&&n&&n(Object.assign({action:e,componentType:t},"number"==typeof a?{buttonIndex:a}:null,{isAuthRequired:i}))})}render(){const{buttonData:e,card:t,children:a,componentType:i,destinationKey:r,isInteractive:n,media:o,promotedContent:s,transformUrl:d}=this.props;if(!t||!r||!n)return a({});const l=t.destinations[r],c=null!=d?d:Ue.a;if(!l)return a({});switch(l.type){case $t:case Gt:case Ht:{const r=t.card_name===ut;return a({link:r&&d?d(l.data.url_data.url,Object.assign({},l.data.scribe_element?{element:l.data.scribe_element}:null,{action:"click"})):c(l.data.url_data.url),onClick:()=>{this._scribeAndLogAction(l,i,e),r&&this._scribeUnifiedCardClick(l,i,e)}})}case Kt:return a({link:q.getMomentLink(l.data.moment_data.moment),onClick:()=>this._scribeAndLogAction(l,i,e)});case Jt:return a({link:{pathname:q.getEventLink(l.data.event_data.id),state:{promotedCardState:{media:o,promotedContent:s}}},onClick:()=>this._scribeAndLogAction(l,i,e)});case qt:return a({link:{pathname:q.getBroadcastLink(l.data.broadcast_data.id),state:{promotedContent:s}},onClick:()=>this._scribeAndLogAction(l,i,e)});case Vt:{const{action_data:r}=l.data,{next_state:n,persist:o}=r;return a({onClick:a=>{switch(this._scribeAndLogAction(l,i,e),r.type){case"compose":e&&q.composeTweet(t.id,e.tweet||void 0,n);break;case"dm":r.recipient&&q.composeDirectMessage({recipient:r.recipient,welcomeMessageId:e&&e.wm_id||void 0,messageText:e&&e.composer_text||void 0});break;case"vote":e&&this._voteForChoice(e.index);break;case"reminder":e&&this._toggleEventReminder(e);break;default:this._updateCardStateAndPersistIfNeeded(t.id,o,n),a.stopPropagation()}}})}default:return a({})}}}d()(aa,"defaultProps",{isInteractive:!0});var ia,ra=(ia=aa,e=>c.createElement(Qi.Context.Consumer,null,t=>c.createElement(ia,o()({},e,t)))),na=a("SOvA"),oa=a("I/9y");class sa extends c.Component{constructor(...e){super(...e),d()(this,"_renderButton",(e,t)=>{const{buttonSize:a,useBlueButtonForAppDetails:i}=this.props,r=this._getButtonIcon(e.icon)||void 0,n=t>0,o=i&&e.isAppDetails||e.isSelected?"primary":"secondary";return c.createElement(ra,{buttonData:e,componentType:"button_group",destinationKey:e.destination,key:e.cta},({link:t,onClick:i})=>c.createElement(ze.a,{icon:r,key:e.cta,link:t,onClick:i,size:a,style:[da.button,n&&da.buttonTopMargin],type:o},e.cta))})}render(){const{chromeless:e,buttons:t}=this.props;return c.createElement(Re.a,{style:!e&&da.wrapperPadding},t.map(this._renderButton))}_getButtonIcon(e){switch(e){case"dm":return c.createElement(na.a,null);case"link":return c.createElement(oa.a,null);default:return null}}}d()(sa,"displayName","@twitter/CardButtons");const da=Pe.a.create(e=>({wrapperPadding:{padding:e.spaces.xSmall},button:{flexGrow:1},buttonTopMargin:{marginTop:e.spaces.xxSmall}}));var la=sa,ca=a("n4Eu");var _a=e=>{const t=e.ext_media_color&&e.ext_media_color.palette,a=t&&ca.a.get(t);return a?`rgb(${a.rgb.red}, ${a.rgb.green}, ${a.rgb.blue})`:void 0},pa=a("cm6r"),ua=a("a6qo"),ma=a("mXq/"),ga=(a("aWzz"),a("PU7B")),ha=a("GcQN");class ya extends c.Component{render(){const{componentType:e,destination:t,importantForAccessibility:a,locationKey:i,mediaEntity:r,ratio:n,renderPlaceholder:o,style:s}=this.props,{media_url_https:d,original_info:{width:l,height:_}={},cropCandidates:p,altText:u=""}=r||{},m=r&&_a(r),g=c.createElement(c.Fragment,null,c.createElement(Qi.Context.Consumer,null,({isDataSaverEnabled:e,isPromoted:t})=>{const a=e?t?"suboptimal":"preview":void 0;return q.renderImage({uri:d,width:l,height:_},n,a,i,p,u)}),this._renderOverlay()),h=c.createElement(Te.a,{ratio:n||1},c.createElement(Re.a,{style:[va.image,va.mediaMissingIconContainer]},c.createElement(ga.a,{style:va.newsIcon}))),y=d&&!o,v=[s,va.root,{backgroundColor:m}],b=[va.root,va.mediaMissing],C=y?v:b,w=y?g:h;return c.createElement(ra,{componentType:e,destinationKey:t},({link:e,onClick:t})=>c.createElement(pa.a,{importantForAccessibility:a,interactive:!1,link:e,onClick:t,style:C},w))}_renderOverlay(){const{overlay:e,playOverlaySize:t}=this.props;if(!e)return null;switch(e.type){case Ft:return c.createElement(ua.a,{align:"left",square:!0},c.createElement(ha.a,null));case Nt:return c.createElement(Re.a,{style:va.playOverlay},c.createElement(ma.a,{size:t}));case Wt:return c.createElement(ua.a,{align:"left"},e.text);default:return null}}}d()(ya,"defaultProps",{playOverlaySize:"small",componentType:"image"}),ya.propTypes={};const va=Pe.a.create(e=>({root:{width:"100%",height:"100%",overflow:"hidden"},image:{width:"100%",height:"100%"},playOverlay:{position:"absolute",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},momentsIcon:{height:e.spaces.small,color:e.colors.white},mediaMissing:{backgroundColor:e.colors.faintGray},mediaMissingIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},newsIcon:{color:e.colors.deepGray,height:"2em"}}));var ba=ya,Ca=a("uavX");const wa=O.a.b74bf8b7,fa=O.a.a7cd5cf4,Ia=O.a.df8cd2af;class xa extends c.Component{constructor(e){super(e),d()(this,"_renderPhotoType",(e,t,a,i)=>{if("photo"!==t.type)return null;const{width:r,height:n}=t.original_info;return c.createElement(ba,{componentType:"swipeable_media",destination:i,importantForAccessibility:this.state.currentSlide!==e?"no-hide-descendants":void 0,key:e,mediaEntity:t,overlay:a,playOverlaySize:this.props.playOverlaySize,ratio:t?Math.max(r/n,1):void 0,style:[Sa.image,0===e&&Sa.firstImage,e===this.props.swipeableMedia.length-1&&Sa.lastImage]})}),d()(this,"_renderVideoType",(e,t,a)=>{const i=e.media_entity;if("uc_video"!==i.type)return null;const{renderVideoPlayer:r,swipeableMedia:n,isDataSaverEnabled:o,isPromoted:s}=this.props;if(this.state.loadedSlide===t&&r){const e=o?s?"suboptimal":"preview":void 0;return c.createElement(Re.a,{importantForAccessibility:this.state.currentSlide!==t?"no-hide-descendants":void 0,key:t,style:[Sa.video,0===t&&Sa.firstImage,t===n.length-1&&Sa.lastImage]},r(i,e,a))}const d={media_url_https:i.media_url_https,type:"photo",original_info:i.original_info};return this._renderPhotoType(t,d,{type:Nt})}),d()(this,"_handleChange",e=>{const{card:t,ucPromotedMetadata:a,onPromotedLogEvent:i}=this.props;this._updateUCMetadata(e),i&&i({action:e>this.state.currentSlide?"unified_card_carousel_swipe_next":"unified_card_carousel_swipe_previous",componentType:"swipeable_media",ucPromotedMetadata:Object.assign({},a,{media_index:this.state.currentSlide+1})}),this._setTransitionAccessibilityLabel(e),this.setState({currentSlide:e}),t&&q.storeCarouselIndex(t.id,e)}),d()(this,"_handleOnRest",e=>{this.setState({loadedSlide:e})}),d()(this,"_updateUCMetadata",e=>{const{ucPromotedMetadata:t,updateUCPromotedMetadata:a}=this.props,i=Object.assign({},t,{media_index:e+1});a&&a(i)}),d()(this,"_setTransitionAccessibilityLabel",e=>{var t;const{swipeableMedia:a}=this.props,i=null==(t=a[e])?void 0:t.media_entity;return i&&"photo"===i.type?this.setState({transitionAccessibilityLabel:Ia({currentSlide:e+1,itemCount:a.length,type:wa,altText:i.altText||""})}):"uc_video"===(null==i?void 0:i.type)?this.setState({transitionAccessibilityLabel:Ia({currentSlide:e+1,itemCount:a.length,type:fa,altText:""})}):void 0}),this.state={currentSlide:e.carouselIndex,loadedSlide:e.carouselIndex,transitionAccessibilityLabel:void 0}}componentDidMount(){this._updateUCMetadata(this.state.currentSlide)}render(){const{swipeableMedia:e}=this.props,t=e[0].media_entity;if("photo"!==t.type&&"uc_video"!==t.type)return null;const{width:a,height:i}=t.original_info,r=a/i,n=this.props.swipeableMedia.some(e=>"uc_video"===e.media_entity.type);return c.createElement(Te.a,{ratio:r,style:Sa.aspectRatio},c.createElement(Re.a,{style:[Sa.root]},c.createElement(Ca.a,{cellSpacing:5,currentSlide:this.state.currentSlide,onChange:this._handleChange,onRest:this._handleOnRest,showNavButtonsOnHover:!0,transitionAccessibilityLabel:this.state.transitionAccessibilityLabel,withReducedNavButtonClickArea:n},e.map((e,t)=>{const a=e.media_entity,i=e.destination;return"photo"===a.type?this._renderPhotoType(t,a,e.overlay,i):"uc_video"===a.type?this._renderVideoType(e,t,r):void 0}))))}}d()(xa,"defaultProps",{carouselIndex:0});const Sa=Pe.a.create(e=>({root:{height:"100%"},aspectRatio:{overflow:"visible"},image:{borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small},video:{overflow:"hidden",maxHeight:"100%"},firstImage:{borderTopLeftRadius:e.borderRadii.large},lastImage:{borderTopRightRadius:e.borderRadii.large}}));var ka=(e=>t=>c.createElement(Qi.Context.Consumer,null,a=>c.createElement(e,o()({},t,a))))(xa);class Ea extends c.Component{render(){const{weight:e,children:t,dir:a,numberOfLines:i,type:r}=this.props;return c.createElement(G.c,{color:"vanity"===r||"description"===r?"deepGray":"normal",dir:a,numberOfLines:i,weight:e},"vanity"===r?c.createElement(G.c,{size:"small",style:La.icon},c.createElement(oa.a,null)):null,q.renderTwemojiText(t))}}d()(Ea,"displayName","@twitter/CardText"),d()(Ea,"defaultProps",{dir:"auto"}),Ea.propTypes={};const La=Pe.a.create(e=>({icon:{marginRight:e.spaces.micro}}));var Ra=Ea,Ta=a("jV+4");class Pa extends c.Component{constructor(...e){super(...e),d()(this,"_hasText",()=>{const{attribution:e,category:t,title:a,description:i,vanity:r}=this.props;return!!(e||a||i||r||t)})}render(){const{destination:e}=this.props;return c.createElement(ra,{componentType:"details",destinationKey:e},({link:e,onClick:t})=>c.createElement(pa.a,{interactive:!1,link:e,onClick:t,style:Oa.detailItemsWrapper},this._renderContent(),this._renderExtraContent()))}_renderExtraContent(){const{extraContent:e}=this.props;return e?c.createElement(Re.a,{style:Oa.extraContentWrapper},e):null}_renderContent(){const{attribution:e,category:t,chromeless:a,destination:i,footer:r,nativeID:n,testID:o,title:s,titleMaxLines:d,description:l,descriptionMaxLines:_,vanity:p,withBottomPadding:u}=this.props,m=!i;return c.createElement(Re.a,{nativeID:n,style:[Oa.textContentWrapper,a?null:[Oa.wrapperPadding,u&&Oa.bottomPadding]],testID:o},e?c.createElement(Ta.a,{isProtected:e.protected,isVerified:e.verified,name:e.name,profileImageUrl:e.profile_image_url_https,screenName:e.screen_name,style:[Oa.attributionWrapper,this._hasText()&&Oa.spaceBelow],withLink:m}):null,t?c.createElement(Re.a,{style:[s||l||p||r?Oa.spaceBelow:null]},c.createElement(Ra,{dir:Ma(t.is_rtl),numberOfLines:1,type:"description"},t.content)):null,s?c.createElement(Re.a,{style:[l||p||r?Oa.spaceBelow:null]},c.createElement(Ra,{dir:Ma(s.is_rtl),numberOfLines:q.shouldLimitTextToSingleLine()?1:d,type:"title"},s.content)):null,l?c.createElement(Re.a,{style:[p||r?Oa.spaceBelow:null]},c.createElement(Ra,{dir:Ma(l.is_rtl),numberOfLines:q.shouldLimitTextToSingleLine()?1:_,type:"description"},l.content)):null,r?c.createElement(Re.a,{style:[p?Oa.spaceBelow:null]},c.createElement(Ra,{dir:"auto",numberOfLines:1,type:"description"},r)):null,p?c.createElement(Re.a,null,c.createElement(Ra,{dir:"auto",numberOfLines:1,type:"vanity"},p)):null)}}d()(Pa,"displayName","@twitter/CardDetail");const Ma=e=>{switch(e){case!0:return"rtl";case!1:return"ltr";default:return"auto"}},Oa=Pe.a.create(e=>({attributionWrapper:{alignItems:"flex-start"},detailItemsWrapper:{flexDirection:"row",justifyContent:"space-between",flexGrow:1},extraContentWrapper:{flexShrink:0,padding:e.spaces.xSmall},textContentWrapper:{flexGrow:1,flexShrink:1,justifyContent:"center"},wrapperPadding:{paddingTop:e.spaces.xSmall,paddingHorizontal:e.spaces.xSmall},bottomPadding:{paddingBottom:e.spaces.xSmall},spaceBelow:{marginBottom:e.spaces.micro}}));var Da=Pa,ja=a("wpLu"),Ba=a("21zW");const Aa=O.a.d58baa7e,za=O.a.c5954d30,Ua=e=>{switch(e){case!0:return"rtl";case!1:return"ltr";default:return"auto"}},Wa=Pe.a.create(e=>({contentWrapper:{flexGrow:1,flexShrink:1,justifyContent:"center"},attributionWrapper:{alignItems:"flex-start"},detailItemsWrapper:{flexDirection:"row",justifyContent:"space-between",flexGrow:1},wrapperPadding:{paddingTop:e.spaces.xxSmall,paddingHorizontal:e.spaces.xSmall},bottomPadding:{paddingBottom:e.spaces.xSmall},spaceBelow:{marginBottom:e.spaces.xxSmall},icon:{marginRight:e.spaces.micro},innerRow:{flexDirection:"row",flexShrink:1}}));var Fa=e=>{const{attribution:t,destination:a,title:i,memberCount:r,titleMaxLines:n}=e;return c.createElement(ra,{componentType:"twitter_list_details",destinationKey:a},({link:e,onClick:a})=>c.createElement(pa.a,{interactive:!1,link:e,onClick:a,style:[Wa.contentWrapper,Wa.wrapperPadding,Wa.bottomPadding]},c.createElement(Re.a,{style:[Wa.innerRow,Wa.spaceBelow]},c.createElement(G.c,{color:"deepGray",size:"small",weight:"bold"},c.createElement(ja.a,{style:Wa.icon}),za),c.createElement(Ba.a,{color:"deepGray"}),c.createElement(G.c,{color:"deepGray",size:"small"},c.createElement(O.a.I18NFormatMessage,{$i18n:"d6b02328",formattedCount:Aa(r),count:r}))),c.createElement(Re.a,{style:Wa.spaceBelow},c.createElement(Ra,{dir:Ua(i.is_rtl),numberOfLines:q.shouldLimitTextToSingleLine()?1:n,type:"title",weight:"bold"},i.content)),c.createElement(Ta.a,{avatarSize:"small",isProtected:t.protected,isVerified:t.verified,name:t.name,nameSize:"small",profileImageUrl:t.profile_image_url_https,screenName:t.screen_name,screenNameSize:"small",style:[Wa.attributionWrapper],withLink:!1})))},Na=a("6Rrp");const Va=O.a.e86732e3,qa=O.a.f668e928;class $a extends c.Component{render(){const{noVotes:e,isFinal:t,isSelected:a,isWinner:i,label:r,percentageOfTotalVote:n}=this.props,o=100===n,s=i?"bold":void 0,d=e?"7px":n+"%",l="light"===Pe.a.theme.paletteName&&Pe.a.theme.highContrastEnabled,_=n/100;return c.createElement(Re.a,{style:Ga.choice},c.createElement(Re.a,{style:[Ga.choicePercentageBar,l&&{backgroundColor:Pe.a.theme.colors.fadedGray},(t||o||e)&&Ga.choicePercentageBarRoundCorners,i&&Ga.choicePercentageBarWinner,{width:d}]}),c.createElement(Re.a,{style:Ga.choiceLabel},c.createElement(G.c,{weight:s},r,a?" ":null,a?c.createElement(Na.a,{accessibilityLabel:Va}):null)),c.createElement(Re.a,{style:Ga.choiceLabel&&Ga.choicePercentage},c.createElement(G.c,{weight:s},qa(_))))}}$a.propTypes={};const Ga=Pe.a.create(e=>({choice:{alignItems:"center",flexDirection:"row",height:e.spaces.large,justifyContent:"space-between"},choicePercentageBar:{backgroundColor:e.colors.lightGray,borderTopLeftRadius:e.borderRadii.medium,borderBottomLeftRadius:e.borderRadii.medium,position:"absolute",top:0,left:0,bottom:0},choicePercentageBarRoundCorners:{borderRadius:e.borderRadii.medium},choicePercentageBarWinner:{backgroundColor:e.colors.lightPrimary},choiceLabel:{paddingVertical:0,paddingHorizontal:e.spaces.xSmall},choicePercentage:{paddingStart:e.spaces.xSmall}}));var Ha=$a;class Ja extends c.Component{render(){const{choices:e,totalVotes:t}=this.props,a=Math.max(...e.map(e=>e.count));return e.map((e,i)=>c.createElement(Re.a,{key:e.index,style:0!==i&&Ka.topMargin},this._renderChoiceResult(e,t,a)))}_renderChoiceResult(e,t,a){const{isFinal:i,selectedChoice:r}=this.props,n=Math.round(e.count/t*1e3)/10||0;return c.createElement(Ha,{isFinal:i,isSelected:r===e.index,isWinner:i&&e.count===a,label:q.renderTwemojiText(e.cta,!0),noVotes:0===e.count,percentageOfTotalVote:n})}}const Ka=Pe.a.create(e=>({topMargin:{marginTop:e.spaces.xxSmall}}));var Xa=Ja;class Qa extends c.Component{render(){const{choices:e,endDatetimeUtc:t,isAuthor:a,isFinal:i,totalVotes:r,resultTextSize:n,selectedChoice:o}=this.props;return c.createElement(Re.a,null,o||i||a?c.createElement(Xa,{choices:e,isFinal:i,selectedChoice:o,totalVotes:r}):c.createElement(la,{buttonSize:"normalCompact",buttons:e.map(({cta:e,index:t,destination:a})=>({cta:e,index:t,destination:a})),chromeless:!0}),c.createElement(G.c,{color:"deepGray",size:n,style:Ya.pollStatus},q.renderNumVotesLabel(r)," Â·"," ",i?q.renderFinalResultsLabel():q.renderTimeLeftLabel(t)))}}d()(Qa,"displayName","@twitter/CardPoll");const Ya=Pe.a.create(e=>({pollStatus:{marginTop:e.spaces.xSmall}}));var Za=Qa,ei=a("bPFD"),ti=a("htQn"),ai=a("7nmT"),ii=a.n(ai),ri=a("U7kY");const ni=Object.freeze({large:{title:1,description:2},medium:{title:2,description:1},small:{title:2,description:0}}),oi=Object.freeze({large:{title:1,description:2},medium:{title:2,description:1},small:{title:2,description:0}}),si=Object.freeze({large:5,medium:4,small:3}),di=Object.freeze({large:"normal",medium:"normalCompact",small:"normalCompact"}),li=(e,t,a,i={})=>{const r={large:oi,small:ni}[e],{alwaysShowDescription:n=!1,capMaxTitleLines:o=Number.MAX_SAFE_INTEGER}=i,s=t>=450?r.large:t>=400?r.medium:r.small,d=[a.category||null,a.attribution||null,a.footer||null,a.vanity||null],{description:l,title:c}=a,_=d.some(Boolean),p=Math.min(o,s.title+(l?0:s.description)+(_?0:1)),u=Math.max(n?1:0,"small"!==e||c||_?s.description:s.description+1);return"small"===e?{titleMaxLines:p,descriptionMaxLines:u}:{titleMaxLines:Math.min(2,p),descriptionMaxLines:u}},ci=(e,t)=>{const a=[t.category||null,t.attribution||null,t.footer||null,t.vanity||null,t.title,t.description].filter(Boolean).length,i=e>=450?si.large:e>=400?si.medium:si.small;return pi(i,a)},_i=e=>e>=450?di.large:e>=400?di.medium:di.small,pi=(e,t)=>{const{borderWidths:a,fontSizes:i,lineHeight:r,spaces:n}=Pe.a.theme;return`calc(${`${i.normal} * ${r} * ${e}`} + ${n.xSmall+" * 2"} + ${a.small+" * 2"} + ${`${n.micro} * ${t-1}`})`},ui=(e,t)=>{const a=e?Math.abs(e-t):1/0,i=ri.a.getScrollbarWidth();return void 0===e||a>i};class mi extends c.Component{constructor(e){super(e),d()(this,"_updateSizes",e=>{if(ui(this._previousWidth,e)){this._previousWidth=e;const{details:t,buttons:a}=this.props,{titleMaxLines:i,descriptionMaxLines:r,buttonSize:n,playOverlaySize:o}=this.state,s=t?li("large",e,t):{titleMaxLines:void 0,descriptionMaxLines:void 0},d=a?_i(e):void 0,l=e<175?"small":"normal",{titleMaxLines:c,descriptionMaxLines:_}=s;(c!==i||_!==r||l!==o||d&&d!==n)&&this.setState({buttonSize:d,descriptionMaxLines:_,playOverlaySize:l,titleMaxLines:c})}}),d()(this,"_handleLayout",e=>{const{width:t}=e.nativeEvent.layout;this._updateSizes(t)}),d()(this,"_setRootNode",e=>{if(e){const t=ii.a.findDOMNode(e);t&&t instanceof window.HTMLElement&&this._updateSizes(t.clientWidth)}}),this.state=Object.assign({},e.details?li("large",500,e.details):null,e.buttons?{buttonSize:_i(500)}:null)}render(){const{a11yDomIds:e,buttons:t,chromeless:a,details:i,dmSentOrReceived:r,nativeID:n,onLikelyInteraction:o,poll:s,testIDs:d,withInteractiveStyling:l,withSquareBottomBorderRadius:_}=this.props,p=this._renderSwipeableMedia(),u=this._renderMedia()||p,m=!!s,g=!a&&!p,h=a&&!p,y=!!(s||t||i)&&!p;return c.createElement(ti.a,{"aria-labelledby":n&&e?[e.cardMediaDomId,e.cardDetailDomId].join(" "):void 0,nativeID:n,onHoverIn:o,onLayout:this._handleLayout,onPressIn:o,style:[r&&hi[r],g&&hi.border,_&&gi[_],p&&hi.rootWithCarousel],testID:null==d?void 0:d.wrapper,viewRef:this._setRootNode,withFocusWithinFocusRing:!0,withInteractiveStyling:l,withOutsetFocusRing:!0},u?c.createElement(Re.a,{importantForAccessibility:"no-hide-descendants",nativeID:n&&e?e.cardMediaDomId:void 0,style:[hi.media,h&&hi.border,y&&hi.mediaBottomBorder,m&&hi.mediaBottomSpace,!!i&&gi.both],testID:null==d?void 0:d.layoutLarge.media},u):null,c.createElement(Re.a,{nativeID:n&&e?e.cardDetailDomId:void 0,style:[p&&hi.carouselBottomContent]},this._renderDetail(),this._renderListDetail(),this._renderButtons(),this._renderPoll()))}_renderDetail(){if(!this.props.details)return null;const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{buttons:a,chromeless:i,details:r,testIDs:n}=this.props,{attribution:o,category:s,description:d,destination:l,footer:_,title:p,vanity:u}=r;return c.createElement(Da,{attribution:o,category:s,chromeless:i,description:0!==t?d:void 0,descriptionMaxLines:t,destination:l,footer:_,testID:null==n?void 0:n.layoutLarge.detail,title:p,titleMaxLines:e,vanity:u,withBottomPadding:!a})}_renderListDetail(){const{listDetails:e}=this.props,{titleMaxLines:t}=this.state;if(!e)return null;const{attribution:a,destination:i,title:r,memberCount:n}=e;return c.createElement(Fa,{attribution:a,destination:i,memberCount:n,title:r,titleMaxLines:t})}_renderButtons(){const{buttonSize:e}=this.state,{chromeless:t,buttons:a,useBlueButtonForAppDetails:i}=this.props;return a?c.createElement(la,{buttonSize:e,buttons:a,chromeless:t,useBlueButtonForAppDetails:i}):null}_renderPoll(){const{poll:e}=this.props;return e?c.createElement(Za,e):null}_renderSwipeableMedia(){const{renderVideoPlayer:e,swipeableMedia:t}=this.props;return t?c.createElement(ka,{playOverlaySize:this.state.playOverlaySize,renderVideoPlayer:e,swipeableMedia:t}):null}_renderMedia(){const{locationKey:e,media:t,renderVideoPlayer:a}=this.props;if(!t||!t.mediaEntity)return null;const{aspect_ratio:i,mediaEntity:r,destination:n,overlay:o}=t;if("photo"===r.type){const{width:t,height:a}=r.original_info;return c.createElement(ba,{destination:n,locationKey:e&&e+"-largeCard",mediaEntity:r,overlay:o,playOverlaySize:this.state.playOverlaySize,ratio:i||(r?Math.max(t/a,1):void 0)})}return"iframe"===r.type?c.createElement(Te.a,{ratio:Math.max(r.aspect_ratio,1)},c.createElement(ei.a,{src:r.url,style:hi.iframe})):"video"===r.type||"uc_video"===r.type||"live_broadcast"===r.type||"vine"===r.type||"tweet_video"===r.type?a?c.createElement(Qi.Context.Consumer,null,({isDataSaverEnabled:e,isPromoted:t})=>a(r,e?t?"suboptimal":"preview":void 0)):null:void 0}}d()(mi,"defaultProps",{isPromoted:!1,withInteractiveStyling:!0}),mi.propTypes={};const gi=Pe.a.create(e=>({both:{borderBottomRightRadius:0,borderBottomLeftRadius:0},left:{borderBottomLeftRadius:0},right:{borderBottomRightRadius:0}})),hi=Pe.a.create(e=>({media:{display:"block"},mediaBottomBorder:{borderBottomColor:e.colors.nestedBorderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},mediaBottomSpace:{marginBottom:e.spaces.xSmall},border:{borderRadius:e.borderRadii.large,borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,overflow:"hidden"},rootWithCarousel:{marginRight:e.spaces.large,borderRadius:e.borderRadii.large},carouselBottomContent:{borderBottomLeftRadius:e.borderRadii.large,borderBottomRightRadius:e.borderRadii.large,borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,marginTop:-.5},iframe:{height:"100%"},sent:{borderColor:e.colors.primary},received:{borderColor:e.colors.lightGray}}));var yi=mi;const vi=O.a.hdf426f5,bi=O.a.a3efd2c3;class Ci extends c.Component{constructor(e){super(e),d()(this,"_updateSizes",e=>{if(ui(this._previousWidth,e)){this._previousWidth=e;const{titleMaxLines:t,descriptionMaxLines:a,imageWidthStyle:i}=this.state,{details:r,topicDetails:n}=this.props,o=li("small",e,n||r,this._getLinesForWidthOptions()),s=ci(e,n||r),{titleMaxLines:d,descriptionMaxLines:l}=o;s===i&&d===t&&l===a||this.setState({titleMaxLines:d,descriptionMaxLines:l,imageWidthStyle:s})}}),d()(this,"_handleLayout",e=>{const{width:t}=e.nativeEvent.layout;this._updateSizes(t)}),d()(this,"_setRootNode",e=>{if(e){const t=ii.a.findDOMNode(e);t&&t instanceof window.HTMLElement&&this._updateSizes(t.clientWidth)}}),d()(this,"_getLinesForWidthOptions",()=>{const{topicDetails:e}=this.props;return Object.assign({alwaysShowDescription:!!e},e?{capMaxTitleLines:2}:null)});const{topicDetails:t,details:a}=e,{titleMaxLines:i,descriptionMaxLines:r}=li("small",500,t||a,this._getLinesForWidthOptions());this.state={descriptionMaxLines:r,titleMaxLines:i,imageWidthStyle:ci(500,t||a)}}render(){const{a11yDomIds:e,dmSentOrReceived:t,nativeID:a,onLikelyInteraction:i,reverse:r,testIDs:n,withInteractiveStyling:o,withSquareBottomBorderRadius:s,topicDetails:d}=this.props,{imageWidthStyle:l}=this.state,_=c.createElement(Re.a,{key:"details",style:fi.details},d?this._renderTopicDetail():this._renderDetail()),p=c.createElement(Re.a,{importantForAccessibility:"no-hide-descendants",key:"media",nativeID:a&&e?e.cardMediaDomId:void 0,style:[fi.media,{width:l},s&&wi[s],r?fi.mediaLeftBorder:fi.mediaRightBorder],testID:null==n?void 0:n.layoutSmall.media},this._renderMedia());return c.createElement(ti.a,{"aria-labelledby":a&&e?[e.cardMediaDomId,e.cardDetailDomId].join(" "):void 0,nativeID:a,onHoverIn:i,onLayout:this._handleLayout,onPressIn:i,style:[fi.root,s&&wi[s],t&&fi[t]],testID:null==n?void 0:n.wrapper,viewRef:this._setRootNode,withFocusWithinFocusRing:!0,withInteractiveStyling:o,withOutsetFocusRing:!0},r?[_,p]:[p,_])}_renderDetail(){const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{a11yDomIds:a,details:i,testIDs:r,nativeID:n}=this.props;return c.createElement(Da,{attribution:i.attribution,category:i.category,description:0!==t?i.description:void 0,descriptionMaxLines:t,destination:i.destination,footer:i.footer,nativeID:n&&a?a.cardDetailDomId:void 0,testID:null==r?void 0:r.layoutSmall.detail,title:i.title,titleMaxLines:e,vanity:i.vanity,withBottomPadding:!0})}_renderTopicDetail(){if(!this.props.topicDetails)return null;const{titleMaxLines:e,descriptionMaxLines:t}=this.state,{topicDetails:{description:a,title:i,destination:r}}=this.props,n={is_rtl:a&&a.is_rtl||i.is_rtl,content:a&&a.content?vi({description:a.content}):bi};return c.createElement(Da,{description:n,descriptionMaxLines:t,destination:r,title:i,titleMaxLines:e,withBottomPadding:!0})}_renderMedia(){const{locationKey:e,media:t}=this.props,{mediaEntity:a,destination:i,overlay:r}=t;return a&&"photo"!==a.type?null:c.createElement(Qi.Context.Consumer,null,({isDataSaverEnabled:t,isPromoted:n})=>{const o=t&&!n;return c.createElement(ba,{destination:i,locationKey:e&&e+"-smallCard",mediaEntity:a,overlay:r,ratio:1,renderPlaceholder:o})})}}d()(Ci,"defaultProps",{withInteractiveStyling:!0}),Ci.propTypes={};const wi=Pe.a.create(e=>({both:{borderBottomRightRadius:0,borderBottomLeftRadius:0},left:{borderBottomLeftRadius:0},right:{borderBottomRightRadius:0}})),fi=Pe.a.create(e=>({root:{borderColor:e.colors.nestedBorderColor,borderStyle:"solid",borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,flexDirection:"row",overflow:"hidden"},media:{display:"block",borderColor:e.colors.nestedBorderColor,borderStyle:"solid",overflow:"hidden"},mediaLeftBorder:{borderLeftWidth:e.borderWidths.small,borderBottomLeftRadius:0,borderTopLeftRadius:0},mediaRightBorder:{borderRightWidth:e.borderWidths.small,borderBottomRightRadius:0,borderTopRightRadius:0},details:{flexGrow:1,flexShrink:1,justifyContent:"center"},sent:{borderColor:e.colors.primary},received:{borderColor:e.colors.lightGray}}));var Ii=Ci,xi=a("QX9J"),Si=a("Qyxo");a("WNMA");const ki=(e,t,a)=>("string"==typeof a?[a]:a).map(a=>e[a]&&e[a][t]).find(e=>!!e),Ei=ki,Li=ki,Ri=ki,Ti=ki,Pi=(e,t)=>{const a=e=>({and:t=>a(e&&i(t)),or:t=>a(e||i(t)),result:()=>e}),i=t=>"string"==typeof t?!!e[t]:t(a(!0).and).result();return i(t)},Mi=(e,t)=>({media_url_https:e.url,type:"photo",original_info:{width:e.width,height:e.height},ext_media_color:{palette:[]},cropCandidates:t,altText:e.alt||""}),Oi=e=>{const t=e.match(/\/([0-9]+)(\/|\.)/);return t?t[1]:""},Di={url:"https://pbs.twimg.com/lex/placeholder_live_nomargin.png",width:1920,height:1080},ji="NOT_STARTED",Bi=O.a.db44ff5b,Ai=O.a.c600045f,zi=e=>{const t=Ei(e,"string_value","domain"),a=Ri(e,"user_value","site"),i=Ei(e,"string_value","app_name");return t&&"vine.co"===t.toLowerCase()||a&&"586671909"===a.id_str||i&&"vine"===i.toLowerCase()},Ui=(e,t,a,i)=>{const r={};var n;return e&&(r[kt]=Mi(e)),t&&a.tweetId&&(r[Pt]={type:"iframe",url:(n=a.tweetId,"https://cards-frame.twitter.com/i/cards/tfw/v1/uc/"+n),aspect_ratio:i}),r},Wi=({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ti(a,"image_value","player_image_original"),n=Ei(a,"string_value","description"),o=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10);return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url"),vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},components:{[Bt]:[It,Ct],[zt]:[St,Ct]},media_entities:{[kt]:Mi(r),[Rt]:{type:"vine",aspect_ratio:o,content_id:Oi(r.url),poster_image:r,publisher_id:Ei(a,"string_value","site")||i.tweetUserId,variants:[{src:Ei(a,"string_value","player_stream_url"),type:Ei(a,"string_value","player_stream_content_type")}]}},components_data:{[It]:{type:Xt,data:{id:Rt}},[St]:{type:Xt,data:{id:kt,destination:yt,overlay:{type:Nt}}},[Ct]:{type:Qt,data:Object.assign({destination:yt},n?{description:{content:n}}:null,{title:{content:Ei(a,"string_value","title")}})}}}}},Fi=Object.assign({media:!0,details:!0,button_group:!0,app_store_details:!0,swipeable_media:!0,twitter_list_details:!0},{media_with_details_horizontal:!0}),Ni=e=>{const t=t=>t.map(t=>e.find(({type:e})=>e===t)).find(Boolean),a="android"===q.getMobileOS()?t(["android_app","iphone_app","ipad_app"]):t(["iphone_app","ipad_app","android_app"]);if(!a)return;a.category||(a.category={is_rtl:!1,content:"android_app"===a.type?"Play Store":"App Store"});const i="android_app"===a.type?"http://play.google.com/store/apps/details?id="+a.id:(e=>"https://itunes.apple.com/app/id"+e)(a.id);return a.url=F.a.isMobileOS()?{pathname:i,external:!0,openInSameFrame:!0}:i,a},Vi=e=>e.unified_card&&e.unified_card.string_value&&"string"==typeof e.unified_card.string_value?JSON.parse(e.unified_card.string_value):{components:[],component_objects:{},destination_objects:{},media_entities:{},app_store_data:{},users:{}},qi=e=>e+"_static",$i={convertAmplifyCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ti(a,"image_value","player_image_original"),n=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),o=Ei(a,"string_value","content_duration_seconds"),s=Ei(a,"string_value","title"),d=Ei(a,"string_value","description");return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:s||d?[It,Ct]:[It],[zt]:s||d?[St,ft]:[St]},destinations:{[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(r||{}),[Rt]:Object.assign({type:"video",aspect_ratio:n,content_id:Ei(a,"string_value","amplify_content_id")},o?{duration_ms:1e3*parseInt(o,10)}:null,{vmap_url:Ei(a,"string_value","amplify_url_vmap"),poster_image:r,publisher_id:Ei(a,"string_value","site")||i.tweetUserId,variants:[]})},components_data:{[It]:{type:Xt,data:{id:Rt}},[St]:{type:Xt,data:{id:kt,destination:bt,overlay:{type:Nt}}},[Ct]:{type:Qt,data:{description:d?{content:d}:void 0,title:s?{content:s}:void 0}},[ft]:{type:Qt,data:{description:d?{content:d}:void 0,destination:bt,title:s?{content:s}:void 0}}}}}},convertAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","thumbnail_original"),r=Ei(a,"string_value","description"),n=Ei(a,"string_value","app_star_rating"),o=Ei(a,"string_value","app_num_ratings"),s=n&&o?q.renderRatingsLabel({appStarRating:n,appNumRatings:o}):void 0,d=Ei(a,"string_value","card_url");return{state:Bt,layout:{[Bt]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:$t,data:{url_data:Object.assign({url:Ei(a,"string_value","card_url")},s?null:{vanity:d}),scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[kt]:Mi(i)}:null),components_data:{[It]:{type:Xt,data:{id:i?kt:null,aspect_ratio:1,destination:yt}},[Ct]:{type:Qt,data:{description:r?{content:r}:void 0,destination:yt,footer:s,title:{content:Ei(a,"string_value","title")}}}}}}},convertAppplayerCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ti(a,"image_value","player_image_original"),n=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),o=Ei(a,"string_value","content_duration_seconds");return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct],[zt]:[St,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(r),[Rt]:Object.assign({type:"video",aspect_ratio:n,content_id:Ei(a,"string_value","player_content_id")||Oi(r.url)},o?{duration_ms:1e3*parseInt(o,10)}:null,{vmap_url:Ei(a,"string_value","player_stream_url"),poster_image:r,publisher_id:Ei(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:Ei(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]})},components_data:{[It]:{type:Xt,data:{id:Rt,aspect_ratio:n}},[St]:{type:Xt,data:{id:kt,aspect_ratio:n,destination:yt}},[Ct]:{type:Qt,data:{destination:yt,title:{content:Ei(a,"string_value","title")},footer:Ei(a,"string_value","app_category")||"App Store"}}}}}},convertBroadcastCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=Ri(a,"user_value","site"),n=r&&i[r.id_str],o=Ei(a,"string_value","broadcaster_display_name"),s=Ei(a,"string_value","broadcast_state")===ji,d=Ti(a,"image_value","broadcast_thumbnail_original"),l=Ti(a,"image_value","broadcast_pre_live_slate")||Di,c=s?l:d,_=Ei(a,"string_value","broadcast_scheduled_start_time"),p=s&&_?q.renderStartingTimeLabel(_):void 0,u=Pe.a.theme.aspectRatios.landscape,m=Math.max(parseInt(Ei(a,"string_value","broadcast_width"),10)/parseInt(Ei(a,"string_value","broadcast_height"),10),1);return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:c?"large":"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),fetch_updates:{[Bt]:!0},on_visibility:{scribe:"show"},id:e,components:{[Bt]:[s?xt:It,Ct],[zt]:[xt,Ct]},destinations:{[yt]:{type:qt,data:{broadcast_data:{id:Ei(a,"string_value","broadcast_id")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},c?{[kt]:Mi(c)}:null,{[Rt]:Object.assign({type:"live_broadcast",aspect_ratio:m,broadcast_id:Ei(a,"string_value","broadcast_id"),content_id:Ei(a,"string_value","broadcast_media_key"),destination:yt},c?{poster_image:c}:null,{timecode:Ei(a,"string_value","broadcast_timecode")||Ei(a,"string_value","broadcast_replay_edited_start_time")})}),components_data:{[It]:{type:Xt,data:{id:Rt,aspect_ratio:m}},[xt]:{type:Xt,data:{id:c?kt:null,aspect_ratio:u,destination:yt,overlay:s?p?{type:Wt,text:p}:void 0:{type:Nt}}},[Ct]:{type:Qt,data:Object.assign({destination:yt},n?{attribution:n}:{category:{content:o}},{title:{content:Ei(a,"string_value","broadcast_title")}})}}}}},convertDirectStoreLinkAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","thumbnail_original"),r=Ei(a,"string_value","description"),n=Ei(a,"string_value","app_star_rating"),o=Ei(a,"string_value","app_num_ratings"),s=n&&o?q.renderRatingsLabel({appStarRating:n,appNumRatings:o}):void 0,d=Ei(a,"string_value","card_url");return{state:Bt,layout:{[Bt]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:$t,data:{url_data:Object.assign({url:Ei(a,"string_value","card_url")},s?null:{vanity:d}),scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[kt]:Mi(i)}:null),components_data:{[It]:{type:Xt,data:{id:i?kt:null,aspect_ratio:1,destination:yt}},[Ct]:{type:Qt,data:{description:r?{content:r}:void 0,destination:yt,footer:s,title:{content:Ei(a,"string_value","title")}}}}}}},convertImageDirectMessageCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ti(a,"image_value","image_original"),o=e=>[1,2,3,4].map(t=>{const i=Ei(a,"string_value","cta"+t),r=Ei(a,"string_value",`cta${t}_wm_id`);return i&&r?{cta:i,wm_id:r,destination:e,icon:"dm",index:t}:null}).filter(Boolean),s=o(yt),d=o(bt),l=Ri(a,"user_value","recipient"),c=l&&r[l.id_str],_=l.id_str!==i.tweetUserId&&c;return{state:Bt,layout:{[Bt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,..._?[Ct]:[],gt],[zt]:[St,..._?[Ct]:[],ht]},destinations:{[yt]:{type:Vt,data:{action_data:{persist:!1,type:"dm",recipient:l.id_str},auth_required:!0,scribe:"click",promoted_log:"dm_button_click"}},[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(n)},components_data:Object.assign({[It]:{type:Xt,data:{id:kt}},[St]:{type:Xt,data:{id:kt,destination:bt}}},_?{[Ct]:{type:Qt,data:{attribution:c}}}:null,{[gt]:{type:Yt,data:{buttons:s}},[ht]:{type:Yt,data:{buttons:d}}})}}},convertLiveEventCard:({cardContext:e,cardId:t,cardType:a,data:i,users:r})=>{const n=Ri(i,"user_value","author"),o=n&&r[n.id_str],s=Ei(i,"string_value","event_id"),d=Ei(i,"string_value","event_category"),l=Ei(i,"string_value","media_type"),c="broadcast"===l,_="video"===l,p=Ei(i,"string_value","broadcast_id"),u=Math.max(parseInt(Ei(i,"string_value","broadcast_width"),10)/parseInt(Ei(i,"string_value","broadcast_height"),10),1),m=Ei(i,"string_value","broadcast_media_key"),g=Ei(i,"string_value","media_tweet_id"),h=Ti(i,"image_value","event_thumbnail_original"),y=Ti(i,"image_value","broadcast_thumbnail"),v=c?y:h,b=c?void 0:[{h:parseInt(Ei(i,"string_value","event_thumbnail_media_size_crops_16x9_h"),10),w:parseInt(Ei(i,"string_value","event_thumbnail_media_size_crops_16x9_w"),10),x:parseInt(Ei(i,"string_value","event_thumbnail_media_size_crops_16x9_x"),10),y:parseInt(Ei(i,"string_value","event_thumbnail_media_size_crops_16x9_y"),10)}],C=Ei(i,"string_value","remind_me_notification_id"),w=Li(i,"boolean_value","remind_me_toggle_visible")&&!!C,f=Li(i,"boolean_value","remind_me_subscribed"),I=f?Ai:Bi;return{state:Bt,layout:{[Bt]:{size:"large"},[Ut]:{size:"small"},[At]:{size:"small",reverse:!0},[zt]:{size:v?"large":"small"}},card:{card_name:a,card_url:Ei(i,"string_value","card_url"),fetch_updates:{[Bt]:!0,[Ut]:!0},on_visibility:{scribe:"show"},id:t,components:{[Bt]:[c||_?It:St,Ct,gt],[Ut]:[St,Ct,gt],[At]:[St,Ct],[zt]:[St,Ct,ht]},destinations:{[yt]:{type:Jt,data:{event_data:{id:s},scribe:"open_link",promoted_log:"card_url_click"}},[vt]:{type:Vt,data:{action_data:{persist:!0,type:"reminder"},auth_required:!0,scribe:"reminder",promoted_log:"card_url_click"}},[bt]:{type:$t,data:{url_data:{url:e&&e.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},v?{[kt]:Mi(v,b)}:null,{[Rt]:c?{type:"live_broadcast",aspect_ratio:u,broadcast_id:p,content_id:m,destination:yt,poster_image:v,timecode:Ei(i,"string_value","broadcast_replay_edited_start_time")}:{type:"tweet_video",aspect_ratio:Pe.a.theme.aspectRatios.landscape,media_tweet_id:g,event_id:s,poster_image:v}}),components_data:{[It]:{type:Xt,data:{id:Rt,aspect_ratio:c?u:Pe.a.theme.aspectRatios.landscape}},[St]:{type:Xt,data:{id:kt,aspect_ratio:Pe.a.theme.aspectRatios.landscape,destination:yt}},[gt]:{type:Yt,data:Object.assign({},w?{buttons:[{cta:I,destination:vt,eventId:s,index:0,isSelected:f,notificationId:C}]}:null)},[ht]:{type:Yt,data:Object.assign({},w?{buttons:[{cta:I,destination:bt,eventId:s,index:0,isSelected:f,notificationId:C}]}:null)},[Ct]:{type:Qt,data:Object.assign({destination:yt},o?{attribution:o}:d?{category:{content:d}}:null,{title:{content:Ei(i,"string_value","event_title")}})}}}}},convertMessageMeCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ei(a,"string_value","default_composer_text"),n=Ei(a,"string_value","welcome_message_id"),o={composer_text:r,cta:q.getMessageMeString(Ei(a,"string_value","cta")),icon:"dm",index:0,wm_id:n},s=Ri(a,"user_value","recipient");return{state:Bt,layout:{[Bt]:{size:"large",chromeless:!0},[zt]:{size:"large",chromeless:!0}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"message_me_show"},id:e,components:{[Bt]:[gt],[zt]:[ht]},destinations:{[yt]:{type:Vt,data:{action_data:{persist:!1,type:"dm",recipient:s.id_str},auth_required:!0,scribe:"message_me_click",promoted_log:"card_url_click"}},[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{},components_data:{[gt]:{type:Yt,data:{buttons:[Object.assign({},o,{destination:yt})]}},[ht]:{type:Yt,data:{buttons:[Object.assign({},o,{destination:bt})]}}}}}},convertMomentCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=Ti(a,"image_value","photo_image")||{url:Ei(a,"string_value","cover_format_media_url"),width:parseInt(Ei(a,"string_value","cover_format_media_size_w"),10)||0,height:parseInt(Ei(a,"string_value","cover_format_media_size_h"),10)||0},n=Ri(a,"user_value","author"),o=n&&i[n.id_str],s=Ei(a,"string_value","title"),d=Ei(a,"string_value","description"),l=Ei(a,"string_value","subcategory_string");return{state:Bt,layout:{[Bt]:{size:"small",reverse:!0}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:Kt,data:{moment_data:{moment:Ei(a,"string_value","id")},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(r)},components_data:{[It]:{type:Xt,data:{id:kt,aspect_ratio:1,overlay:{type:Ft},destination:yt}},[Ct]:{type:Qt,data:{attribution:o,category:!o&&l?{content:l}:void 0,description:d?{content:d}:void 0,destination:yt,title:s?{content:s}:void 0}}}}}},convertPeriscopeBroadcastCard:({cardId:e,cardType:t,data:a,users:i})=>{const r=Ti(a,"image_value","thumbnail_original"),n=Math.max(parseInt(Ei(a,"string_value","broadcast_width"),10)/parseInt(Ei(a,"string_value","broadcast_height"),10),1),o=Ei(a,"string_value","broadcaster_twitter_id"),s=o?i[o]:void 0,d=Ei(a,"string_value","description");return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:r?"large":"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct],[zt]:[St,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url"),vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},r?{[kt]:Mi(r)}:null,{[Rt]:Object.assign({type:"live_broadcast",aspect_ratio:n,broadcast_id:Ei(a,"string_value","id"),content_id:Ei(a,"string_value","broadcast_media_key"),destination:yt},r?{poster_image:r}:null,{timecode:Ei(a,"string_value","timecode")||Ei(a,"string_value","replay_edited_start_time")})}),components_data:{[It]:{type:Xt,data:{id:Rt,aspect_ratio:n}},[St]:{type:Xt,data:{id:r?kt:null,destination:yt,overlay:{type:Nt}}},[Ct]:{type:Qt,data:{attribution:s,description:d?{content:d}:void 0,destination:yt,title:o?void 0:{content:Ei(a,"string_value","title")}}}}}}},convertPlayerCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ti(a,"image_value","player_image_original"),o=Ei(a,"string_value","description"),s=Ei(a,"string_value","player_url"),d=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),l=[It,Ct],c=[St,wt];return zi(a)?Wi({cardId:e,cardType:t,data:a,cardContext:i,users:r}):{state:Bt,layout:{[Bt]:{size:"small"},[At]:{size:"large"},[zt]:{size:"small"},[Ut]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:i.tweetId?l:c,[At]:[xt,wt],[zt]:c,[Ut]:[St,wt]},destinations:{[yt]:{type:Vt,data:{action_data:{next_state:At,persist:!1,vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"click",promoted_log:"card_url_click"}},[vt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url"),vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Ui(n,s,i,d),components_data:{[It]:{type:Xt,data:{id:n?kt:null,aspect_ratio:1,overlay:{type:Nt},destination:s?yt:vt}},[xt]:{type:Xt,data:{id:s?Pt:null,aspect_ratio:d}},[St]:{type:Xt,data:{id:n?kt:null,aspect_ratio:1,overlay:{type:Nt},destination:vt}},[Ct]:{type:Qt,data:Object.assign({destination:s?yt:vt},o?{description:{content:o}}:null,{title:{content:Ei(a,"string_value","title")}})},[wt]:{type:Qt,data:Object.assign({destination:vt},o?{description:{content:o}}:null,{title:{content:Ei(a,"string_value","title")}})}}}}},convertPollCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ti(a,"image_value","image_original"),n=Ei(a,"string_value","player_stream_url"),o=Ti(a,"image_value","player_image_original"),s=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),d=Ei(a,"string_value","content_duration_seconds"),l=Li(a,"boolean_value","counts_are_final"),c=Ei(a,"string_value","selected_choice"),_=Ei(a,"string_value","end_datetime_utc"),p=i.viewerUserId===i.tweetUserId,u="detail"===i.locationKey?"normal":"small",m={};r&&(m[kt]=Mi(r)),n&&(m[Rt]={type:"video",aspect_ratio:s,content_id:Ei(a,"string_value","player_content_id")||Oi(n),duration_ms:d?1e3*parseInt(d,10):void 0,vmap_url:n,poster_image:o,publisher_id:Ei(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:Ei(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]},m[Lt]=Mi(o||{}));const g=e=>{const t=[1,2,3,4].map(t=>{const i=Ei(a,"string_value",`choice${t}_label`),r=Ei(a,"string_value",`choice${t}_count`);return i?{index:t,cta:i,count:parseInt(r,10)||0,destination:e}:null}).filter(Boolean);return{type:"poll",data:Object.assign({choices:t,isAuthor:p,isFinal:l,resultTextSize:u,endDatetimeUtc:_},c?{selectedChoice:parseInt(c,10)}:null,{totalVotes:t.reduce((e,t)=>e+t.count,0)})}};return{layout:{[Bt]:{size:"large",chromeless:!0}},state:Bt,card:{id:e,card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},fetch_updates:{[Bt]:!l},components:{[Bt]:r||n?[Mt,It]:[Mt],[zt]:r||n?[Ot,St]:[Ot]},components_data:Object.assign({[Mt]:g(yt),[Ot]:g(bt)},r?{[It]:{type:Xt,data:{id:kt}},[St]:{type:Xt,data:{id:kt}}}:n?{[It]:{type:Xt,data:{id:Rt}},[St]:{type:Xt,data:{id:Lt}}}:null),destinations:{[yt]:{type:Vt,data:{action_data:{persist:!0,type:"vote"},auth_required:!0,scribe:"vote",promoted_log:"poll_card_vote"}},[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:m}}},convertPromoImageAppCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","promo_image_original");return{state:Bt,layout:{[Bt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct,gt]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value",["app_url","card_url"])},scribe:"open_link",promoted_log:"install_app"}}},media_entities:{[kt]:Mi(i)},components_data:{[It]:{type:Xt,data:{id:kt,destination:yt}},[Ct]:{type:Qt,data:{destination:yt,title:{content:Ei(a,"string_value","title")},footer:"App Store"}},[gt]:{type:Yt,data:{buttons:[{index:0,cta:q.getCtaString(Ei(a,"string_value","cta_key")),destination:yt}]}}}}}},convertPromoImageConvoCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ei(a,"string_value","thank_you_url"),n=Ti(a,"image_value",["cover_promo_image","promo_image"]),o=Ti(a,"image_value","promo_image"),s=Ei(a,"string_value","title"),d=e=>["one","two","three","four"].map((t,i)=>{const r=Ei(a,"string_value","cta_"+t),n=Ei(a,"string_value",`cta_${t}_tweet`);return r&&n?{icon:"compose",index:i,cta:q.renderTweetActionLabel(r),tweet:n,destination:e}:null}).filter(Boolean),l=d(yt),c=d(bt);return{state:Bt,layout:{[Bt]:{size:"large"},[At]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{default:[It,Ct,gt],secondary:[xt,wt],static:[St,ft,ht]},destinations:Object.assign({[yt]:{type:Vt,data:{action_data:{next_state:At,persist:!0,type:"compose"},auth_required:!0,scribe:"click",promoted_log:"convo_button_click"}}},r?{[vt]:{type:$t,data:{url_data:{url:r,vanity:Ei(a,"string_value",["thank_you_vanity_url","thank_you_shortened_url","thank_you_url"])},scribe:"open_link",promoted_log:"card_url_click"}}}:null,{[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}}),media_entities:{[kt]:Mi(n),[Et]:Mi(o)},components_data:{[It]:{type:Xt,data:{id:kt}},[xt]:{type:Xt,data:{id:Et,destination:vt}},[St]:{type:Xt,data:{id:kt,destination:bt}},[Ct]:{type:Qt,data:Object.assign({},s?{title:{content:s}}:null)},[wt]:{type:Qt,data:Object.assign({title:{content:Ei(a,"string_value","thank_you_text")}},r?{destination:vt}:null)},[ft]:{type:Qt,data:Object.assign({},s?{title:{content:s}}:null)},[gt]:{type:Yt,data:{buttons:l}},[ht]:{type:Yt,data:{buttons:c}}}}}},convertPromoVideoConvoCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ei(a,"string_value","thank_you_url"),n=Ti(a,"image_value",["cover_player_image_original","player_image_original"]),o=Ti(a,"image_value","player_image_original"),s=Ti(a,"image_value","cover_promo_image_original"),d=Ei(a,"string_value","title"),l=parseInt(Ei(a,"string_value","cover_player_width"),10)/parseInt(Ei(a,"string_value","cover_player_height"),10),c=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),_=e=>["one","two","three","four"].map((t,i)=>{const r=Ei(a,"string_value","cta_"+t),n=Ei(a,"string_value",`cta_${t}_tweet`);return r&&n?{icon:"compose",index:i,cta:q.renderTweetActionLabel(r),tweet:n,destination:e}:null}).filter(Boolean),p=_(yt),u=_(bt),m=Ei(a,"string_value","cover_player_stream_url"),g=Ei(a,"string_value","player_stream_url"),h=Ei(a,"string_value","player_hls_url"),y=Ri(a,"user_value","site"),v=Ei(a,"string_value","content_duration_seconds"),b=Ei(a,"string_value","cover_content_duration_seconds");return{state:Bt,layout:{[Bt]:{size:"large"},[At]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{default:[It,Ct,gt],secondary:[xt,wt],static:[St,ft,ht]},destinations:Object.assign({[yt]:{type:Vt,data:{action_data:{next_state:At,persist:!0,type:"compose"},auth_required:!0,scribe:"click",promoted_log:"convo_button_click"}}},r?{[vt]:{type:$t,data:{url_data:{url:r,vanity:Ei(a,"string_value",["thank_you_vanity_url","thank_you_shortened_url","thank_you_url"])},scribe:"open_link",promoted_log:"card_url_click"}}}:null,{[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}}),media_entities:Object.assign({},m?{[Rt]:Object.assign({type:"video",aspect_ratio:l,content_id:Oi(m)},b?{duration_ms:1e3*parseInt(b,10)}:null,{vmap_url:m,poster_image:n,publisher_id:y?y.id_str:i.tweetUserId})}:null,{[Tt]:Object.assign({type:"video",aspect_ratio:c,content_id:Oi(g),duration_ms:v?1e3*parseInt(v,10):void 0,vmap_url:g,poster_image:o,publisher_id:y?y.id_str:i.tweetUserId},h?{variants:[{src:h,type:"application/x-mpegURL"}]}:null),[kt]:Mi(s||{}),[Lt]:Mi(o||{})}),components_data:{[It]:{type:Xt,data:{id:m?Rt:s?kt:Tt}},[xt]:{type:Xt,data:{id:Tt}},[St]:{type:Xt,data:{id:o?Lt:kt,destination:bt,aspect_ratio:o?void 0:1.91}},[Ct]:{type:Qt,data:Object.assign({},d?{title:{content:d}}:null)},[wt]:{type:Qt,data:Object.assign({title:{content:Ei(a,"string_value","thank_you_text")}},r?{destination:vt}:null)},[ft]:{type:Qt,data:Object.assign({},d?{title:{content:d}}:null)},[gt]:{type:Yt,data:{buttons:p}},[ht]:{type:Yt,data:{buttons:u}}}}}},convertPromoVideoWebsiteCard:({cardId:e,cardType:t,data:a,cardContext:i})=>{const r=Ti(a,"image_value","player_image_original"),n=Ei(a,"string_value","player_hls_url"),o=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),s=Ei(a,"string_value","content_duration_seconds");return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct],[zt]:[St,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value",["website_shortened_url","website_url","card_url"]),vanity:Ei(a,"string_value",["vanity_url","website_shortened_url","website_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(r),[Rt]:Object.assign({type:"video",aspect_ratio:o,content_id:Ei(a,"string_value","player_content_id")||Oi(r.url),duration_ms:s?1e3*parseInt(s,10):void 0,vmap_url:Ei(a,"string_value","player_stream_url"),poster_image:r,publisher_id:Ei(a,"string_value","player_owner_id")||i.tweetUserId},n?{variants:[{src:n,type:"application/x-mpegURL"}]}:null)},components_data:{[It]:{type:Xt,data:{id:Rt,aspect_ratio:o}},[St]:{type:Xt,data:{id:kt,aspect_ratio:o,destination:yt}},[Ct]:{type:Qt,data:{destination:yt,title:{content:Ei(a,"string_value","title")}}}}}}},convertPromoWebsiteCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","promo_image_original");return{state:Bt,layout:{[Bt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value",["website_shortened_url","website_url","card_url"]),vanity:Ei(a,"string_value",["vanity_url","website_shortened_url","website_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(i)},components_data:{[It]:{type:Xt,data:{id:kt,destination:yt}},[Ct]:{type:Qt,data:{destination:yt,title:{content:Ei(a,"string_value","title")}}}}}}},convertSummaryCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","thumbnail_image_original"),r=Ei(a,"string_value","description");return{state:Bt,layout:{[Bt]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url"),vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[kt]:Mi(i)}:null),components_data:{[It]:{type:Xt,data:{id:i?kt:null,aspect_ratio:1,destination:yt}},[Ct]:{type:Qt,data:Object.assign({destination:yt},r?{description:{content:r}}:null,{title:{content:Ei(a,"string_value","title")}})}}}}},convertSummaryLargeImageCard:({cardId:e,cardType:t,data:a})=>{const i=Ti(a,"image_value","summary_photo_image_original"),r=Ei(a,"string_value","description");return{state:Bt,layout:{[Bt]:{size:i?"large":"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,Ct]},destinations:{[yt]:{type:$t,data:{url_data:{url:Ei(a,"string_value","card_url"),vanity:Ei(a,"string_value",["vanity_url","card_url"])},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:Object.assign({},i?{[kt]:Mi(i)}:null),components_data:{[It]:{type:Xt,data:{id:i?kt:null,aspect_ratio:i?1.91:1,destination:yt}},[Ct]:{type:Qt,data:Object.assign({destination:yt},r?{description:{content:r}}:null,{title:{content:Ei(a,"string_value","title")}})}}}}},convertUnifiedCardCard:({cardId:e,cardType:t,data:a})=>{const i=Vi(a),{app_store_data:r,components:n,component_objects:o,destination_objects:s,media_entities:d,users:l}=i,c=((e,t)=>Object.keys(e).reduce((a,i)=>{const r=e[i];if("app_store_with_docked_media"===r.type||"app_store"===r.type){const e=Ni(t[r.data.app_id]);a[i]={type:"browser",data:{url_data:{url:e?e.url:"https://twitter.com"},scribe:"unified_card_app_store_open_link",promoted_log:"unified_card_component_app_store_click"}}}else a[i]=Object.assign({},r,{data:Object.assign({},r.data,{scribe:"open_link",promoted_log:"unified_card_component_url_click"})});return a},{}))(s,r),_=n.find(e=>o[e]&&"details"===o[e].type),p=_&&"details"===o[_].type?o[_]:null,u=n.find(e=>o[e]&&"app_store_details"===o[e].type),m=u&&"app_store_details"===o[u].type?o[u]:null,g=((e,t)=>{const a=e?e.data.destination:void 0;let i,r;if(e)if("details"===e.type)i=Object.assign({},e.data.title);else if("app_store_details"===e.type){const a=e.data.app_id,n=Ni(t[a])||{};i=n.title,r=n.category?n.category.content:void 0}return{type:"details",data:{title:i,footer:r,destination:a}}})(p||m||void 0,r),h=_||u,y=n.find(e=>o[e]&&"twitter_list_details"===o[e].type),v=y&&"twitter_list_details"===o[y].type?((e,t)=>{const a=e.data.destination,i=Object.assign({},e.data.name),r=t[e.data.user_id],n=e.data.member_count;return{type:ea,data:{title:i,destination:a,memberCount:n,attribution:r}}})(o[y],l):null,b=n.find(e=>o[e]&&"media_with_details_horizontal"===o[e].type);if(!!b){const i=b&&"media_with_details_horizontal"===o[b].type?(({data:{destination:e,topic_detail:{title:t,subtitle:a},media_id:i}})=>({[It]:{type:Xt,data:{id:i,aspect_ratio:1,destination:e}},[jt]:{type:ta,data:Object.assign({destination:e},(null==a?void 0:a.content)?{description:Object.assign({},a)}:null,{title:t})}}))(o[b]):null,r=Object.keys(c).reduce((e,t)=>(e[t]=Object.assign({},c[t],{data:Object.assign({},c[t].data,{scribe_element:"uc_media_with_details_horizontal"})}),e),{});return{state:Bt,layout:{[Bt]:{size:"small"},[zt]:{size:"small"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,jt]},destinations:r,media_entities:Object.assign({},d),components_data:Object.assign({},i)}}}{const i=n.find(e=>o[e]&&"button_group"===o[e].type),r=i&&"button_group"===o[i].type?{type:Yt,data:{buttons:o[i].data.buttons.map((e,t)=>({index:t+1,icon:e.icon_type,destination:e.destination,cta:"cta"===e.type?q.getCtaString(e.action):e.text.content,is_rtl:"custom"===e.type?e.text.is_rtl:void 0,isAppDetails:null!=m}))}}:null,s=n.find(e=>o[e]&&"swipeable_media"===o[e].type),l=s&&"swipeable_media"===o[s].type?{type:Zt,data:{media_list:o[s].data.media_list}}:null,_=n.find(e=>o[e]&&"media"===o[e].type),p=_&&"media"===o[_].type?o[_]:null,u=Object.keys(d).reduce((e,t)=>{const a=d[t];return e[t]=Object.assign({},a,{type:"video"===a.type?"uc_video":a.type}),e},{}),b=p?u[p.data.id]:null,C=b?b.original_info.width/b.original_info.height:null,w=Object.keys(d).reduce((e,t)=>{const a=d[t];return e[qi(t)]={media_url_https:a.media_url_https,type:"photo",original_info:a.original_info},e},{}),f=b&&"uc_video"===b.type,I=l&&l.data.media_list.some(e=>e.id&&"uc_video"===u[e.id].type),x=[...f?[St]:[],...I?[Dt]:[],...n.filter(e=>!(f&&e===_||I&&e===s))],S={};return g&&h&&(S[h]=g),r&&i&&(S[i]=r),l&&s&&(S[s]=l),v&&y&&(S[y]=v),p&&_&&(S[_]={type:Xt,data:Object.assign({},p.data)}),f&&p&&(S[St]={type:Xt,data:{aspect_ratio:C||void 0,destination:p.data.destination,id:qi(p.data.id),overlay:{type:Nt}}}),I&&l&&(S[Dt]={type:Zt,data:{media_list:l.data.media_list.map(e=>({destination:e.destination,id:qi(e.id),overlay:{type:Nt}}))}}),{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:n,[zt]:x},destinations:c,media_entities:Object.assign({},u,w),components_data:S}}}},convertVideoDirectMessageCard:({cardId:e,cardType:t,data:a,cardContext:i,users:r})=>{const n=Ti(a,"image_value","player_image_original"),o=Ei(a,"string_value","player_stream_url"),s=parseInt(Ei(a,"string_value","player_width"),10)/parseInt(Ei(a,"string_value","player_height"),10),d=Ei(a,"string_value","content_duration_seconds"),l=e=>[1,2,3,4].map(t=>{const i=Ei(a,"string_value","cta"+t),r=Ei(a,"string_value",`cta${t}_wm_id`);return i&&r?{icon:"dm",index:t,cta:i,wm_id:r,destination:e}:null}).filter(Boolean),c=l(yt),_=l(bt),p=Ri(a,"user_value","recipient"),u=p&&r[p.id_str],m=p.id_str!==i.tweetUserId&&u;return{state:Bt,layout:{[Bt]:{size:"large"},[zt]:{size:"large"}},card:{card_name:t,card_url:Ei(a,"string_value","card_url"),on_visibility:{scribe:"show"},id:e,components:{[Bt]:[It,...m?[Ct]:[],gt],[zt]:[St,...m?[Ct]:[],ht]},destinations:{[yt]:{type:Vt,data:{action_data:{persist:!1,type:"dm",recipient:p.id_str},auth_required:!0,scribe:"click",promoted_log:"dm_button_click"}},[bt]:{type:$t,data:{url_data:{url:i.tweetPermalink||"https://twitter.com"},scribe:"open_link",promoted_log:"card_url_click"}}},media_entities:{[kt]:Mi(n||{}),[Rt]:Object.assign({type:"video",aspect_ratio:s,content_id:Ei(a,"string_value","player_content_id")||Oi(o)},d?{duration_ms:1e3*parseInt(d,10)}:null,{vmap_url:o,poster_image:n,publisher_id:Ei(a,"string_value","player_owner_id")||i.tweetUserId,variants:[{src:Ei(a,"string_value","player_hls_url"),type:"application/x-mpegURL"}]})},components_data:Object.assign({[It]:{type:Xt,data:{id:Rt}},[St]:{type:Xt,data:{id:kt,destination:bt}}},m?{[Ct]:{type:Qt,data:{attribution:u}}}:null,{[gt]:{type:Yt,data:{buttons:c}},[ht]:{type:Yt,data:{buttons:_}}})}}}},Gi={shouldRenderAmplifyCard:e=>Pi(e,e=>e("player_width").and("player_height").and("amplify_url_vmap").and("amplify_content_id")),shouldRenderAppCard:e=>Pi(e,e=>e("card_url").and("title")),shouldRenderAppplayerCard:e=>Pi(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url")),shouldRenderBroadcastCard:e=>Pi(e,e=>e("card_url").and("broadcast_id").and("broadcast_title")),shouldRenderDirectStoreLinkAppCard:e=>Pi(e,e=>e("card_url").and("title")),shouldRenderImageDirectMessageCard:e=>Pi(e,e=>e("recipient").and("cta1").and("cta1_wm_id").and("image_original")),shouldRenderLiveEventCard:e=>Pi(e,e=>e("card_url").and("event_id").and("event_title")),shouldRenderMessageMeCard:(e,t)=>Pi(e,e=>e("recipient").and("cta"))&&t.tweetUserId===Ri(e,"user_value","recipient").id_str,shouldRenderMomentCard:e=>Pi(e,e=>e("card_url").and(e=>e("photo_image").or("cover_format_media_url")).and("id").and(e=>e("title").or("author").or("subcategory_string"))),shouldRenderPeriscopeBroadcastCard:e=>Pi(e,e=>e("card_url").and("broadcast_width").and("broadcast_height").and("id").and(e=>e("broadcaster_twitter_id").or("title"))),shouldRenderPlayerCard:e=>zi(e)?Pi(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url").and("player_stream_content_type")):Pi(e,e=>e("card_url").and("player_url").and("player_height").and("player_width").and("title")),shouldRenderPollCard:e=>Pi(e,e=>e("choice1_label").and("choice2_label").and("end_datetime_utc").and("counts_are_final").and("api").and("card_url")),shouldRenderPromoImageAppCard:e=>Pi(e,e=>e("card_url").and("title").and("promo_image_original").and("cta_key")),shouldRenderPromoImageConvoCard:e=>Pi(e,e=>e("card_url").and("thank_you_text").and("card_id").and("promo_image").and("cta_one").and("cta_one_tweet")),shouldRenderPromoVideoConvoCard:e=>Pi(e,e=>e("card_url").and("thank_you_text").and("card_id").and("cta_one").and("cta_one_tweet").and("player_width").and("player_height").and("player_stream_url")),shouldRenderPromoVideoWebsiteCard:e=>Pi(e,e=>e("card_url").and("title").and("player_width").and("player_height").and("player_image_original").and("player_stream_url")),shouldRenderPromoWebsiteCard:e=>Pi(e,e=>e("card_url").and("title").and("promo_image_original")),shouldRenderSummaryCard:e=>Pi(e,e=>e("card_url").and("title")),shouldRenderSummaryLargeImageCard:e=>Pi(e,e=>e("card_url").and("title")),shouldRenderUnifiedCardCard:e=>{const t=Vi(e);return!!(t&&t.components&&t.component_objects&&t.components.length&&t.components.every(e=>t.component_objects[e]&&t.component_objects[e].type in Fi))},shouldRenderVideoDirectMessageCard:e=>Pi(e,e=>e("recipient").and("cta1").and("cta1_wm_id").and("player_width").and("player_height").and("player_stream_url"))};var Hi=(e,t,a)=>{const i={[We]:Gi.shouldRenderAmplifyCard,[Fe]:Gi.shouldRenderAppCard,[Ne]:Gi.shouldRenderAppplayerCard,[Ve]:Gi.shouldRenderBroadcastCard,[qe]:Gi.shouldRenderDirectStoreLinkAppCard,[$e]:Gi.shouldRenderImageDirectMessageCard,[Ge]:Gi.shouldRenderLiveEventCard,[He]:Gi.shouldRenderMessageMeCard,[Je]:Gi.shouldRenderMomentCard,[Ke]:Gi.shouldRenderPeriscopeBroadcastCard,[Xe]:Gi.shouldRenderPlayerCard,[Qe]:Gi.shouldRenderPollCard,[Ye]:Gi.shouldRenderPollCard,[Ze]:Gi.shouldRenderPollCard,[et]:Gi.shouldRenderPollCard,[tt]:Gi.shouldRenderPollCard,[at]:Gi.shouldRenderPollCard,[it]:Gi.shouldRenderPollCard,[rt]:Gi.shouldRenderPollCard,[nt]:Gi.shouldRenderPollCard,[ot]:Gi.shouldRenderPromoImageAppCard,[st]:Gi.shouldRenderPromoImageConvoCard,[dt]:Gi.shouldRenderPromoVideoConvoCard,[lt]:Gi.shouldRenderPromoVideoWebsiteCard,[ct]:Gi.shouldRenderPromoWebsiteCard,[_t]:Gi.shouldRenderSummaryCard,[pt]:Gi.shouldRenderSummaryLargeImageCard,[ut]:Gi.shouldRenderUnifiedCardCard,[mt]:Gi.shouldRenderVideoDirectMessageCard}[e];return!!i&&i(t,a)};const Ji={[We]:$i.convertAmplifyCard,[Fe]:$i.convertAppCard,[Ne]:$i.convertAppplayerCard,[Ve]:$i.convertBroadcastCard,[qe]:$i.convertDirectStoreLinkAppCard,[$e]:$i.convertImageDirectMessageCard,[Ge]:$i.convertLiveEventCard,[He]:$i.convertMessageMeCard,[Je]:$i.convertMomentCard,[Ke]:$i.convertPeriscopeBroadcastCard,[Xe]:$i.convertPlayerCard,[Qe]:$i.convertPollCard,[Ye]:$i.convertPollCard,[Ze]:$i.convertPollCard,[et]:$i.convertPollCard,[tt]:$i.convertPollCard,[at]:$i.convertPollCard,[it]:$i.convertPollCard,[rt]:$i.convertPollCard,[nt]:$i.convertPollCard,[ot]:$i.convertPromoImageAppCard,[st]:$i.convertPromoImageConvoCard,[dt]:$i.convertPromoVideoConvoCard,[lt]:$i.convertPromoVideoWebsiteCard,[ct]:$i.convertPromoWebsiteCard,[_t]:$i.convertSummaryCard,[pt]:$i.convertSummaryLargeImageCard,[ut]:$i.convertUnifiedCardCard,[mt]:$i.convertVideoDirectMessageCard},Ki=(e,t)=>{const{binding_values:a,name:i,url:r,users:n={}}=e,o=Ji[i];return Hi(i,a,t)&&o?o({cardId:r,cardType:i,data:a,cardContext:t,users:n}):null};class Xi extends c.Component{constructor(e){super(e),d()(this,"_handleLikelyInteraction",()=>{this.state.interactionLikely||this.setState({interactionLikely:!0})}),d()(this,"_updateCardState",e=>{this.setState({state:e})}),d()(this,"_updateUCPromotedMetadata",e=>{this.setState({ucPromotedMetadata:e})}),d()(this,"_scribeCardAction",({action:e,element:t,componentType:a,ctaIndex:i,isAuthRequired:r})=>{const{card:n}=this.state,{onScribeEvent:o}=this.props;n&&o&&o({action:e,element:t,componentType:a,cardName:n.card_name,cardUrl:n.card_url,ctaIndex:i,isMessageMe:n.card_name===He,isAuthRequired:r})}),d()(this,"_onPromotedLogEvent",e=>{const{onPromotedLogEvent:t}=this.props;t&&t(Object.assign({},e,{ucPromotedMetadata:this.state.ucPromotedMetadata}))}),d()(this,"_requestCardUpdate",()=>{const{requestCardUpdate:e}=this.props,{card:t}=this.state;e&&t&&e([t.id],{name:t.card_name})});const t=this._convertCard(e);this.state=t?Object.assign({},t):{}}componentDidMount(){const{card:e}=this.state;e&&this._scribeCardAction({action:e.on_visibility.scribe,componentType:"card"})}UNSAFE_componentWillReceiveProps(e){this.setState(this._convertCard(e))}render(){const{card:e,state:t,ucPromotedMetadata:a,carouselIndex:i}=this.state,{a11yDomIds:r,cardContext:n,dmSentOrReceived:s,isDataSaverEnabled:d,isInteractive:l,isPromoted:_,onEventReminderClick:p,onPollVote:u,onScribeEvent:m,promotedContent:g,nativeID:h,requestCardUpdate:y,testIDs:v,transformUrl:b,useBlueButtonForAppDetails:C,withSquareBottomBorderRadius:w}=this.props;if(!e)return null;const f=this._getCurrentLayout(),I=this._getDetailData(),x=this._getTwitterListDetailsData(),S=this._getTopicDetailsData(),k=this._getMediaData(),E=this._getPollData(),L=this._getButtonsData(),R=this._getSwipeableMediaData(),{fetch_updates:T}=e,P=this.props.withInteractiveStyling&&!!(I&&I.destination||x&&x.destination),M={a11yDomIds:r,dmSentOrReceived:s,locationKey:n.locationKey,onLikelyInteraction:this._handleLikelyInteraction,nativeID:h,testIDs:v,withInteractiveStyling:P,withSquareBottomBorderRadius:w,media:k},O=y&&T&&T[t],D=k&&k.mediaEntity&&"photo"===k.mediaEntity.type,j="small"===f.size||d&&I&&!L&&D&&!_;return c.createElement(xi.a.ViewImpressor,{viewType:"card"},c.createElement(Xi.Context.Provider,{value:{card:e,carouselIndex:i,isDataSaverEnabled:d,isInteractive:l,isPromoted:_,media:k,promotedContent:g,onEventReminderClick:p,onPollVote:u,onPromotedLogEvent:this._onPromotedLogEvent,onScribeEvent:m,scribeCardAction:this._scribeCardAction,transformUrl:b,ucPromotedMetadata:a,updateCardState:this._updateCardState,updateUCPromotedMetadata:this._updateUCPromotedMetadata}},this._renderPreconnectTags(),O?c.createElement(Ae,{requestCardUpdate:this._requestCardUpdate}):null,j?I||S?c.createElement(Ii,o()({},M,{details:I,reverse:f.reverse},S?{topicDetails:S}:null)):null:c.createElement(yi,o()({},M,L?{buttons:L}:null,E?{poll:E}:null,x?{listDetails:x}:null,{chromeless:f.chromeless,details:I,renderVideoPlayer:this.props.renderVideoPlayer,swipeableMedia:R,useBlueButtonForAppDetails:C}))))}_getCurrentLayout(){const{layout:e,state:t}=this.state,{isDataSaverEnabled:a}=this.props;return e[a?Ut:t]||e[Bt]}_getButtonsData(){const e=this._getComponent("button_group");return e?e.data.buttons:null}_getSwipeableMediaData(){const{card:e}=this.state,t=this._getComponent("swipeable_media"),a=t&&t.data;if(!a||!a.media_list)return;return Object(Si.a)(a.media_list,t=>{const a=t&&t.id&&e?e.media_entities[t.id]:void 0;return a?Object.assign({},t,{media_entity:a}):void 0})}_getDetailData(){const e=this._getComponent("details"),t=e&&e.data;if(t){if(t.destination){const e=this._getVanityText(t.destination);t.vanity=e||void 0}return t}}_getTwitterListDetailsData(){const e=this._getComponent("twitter_list_details");return e&&e.data||null}_getTopicDetailsData(){const e=this._getComponent("topic_details");return e&&e.data||null}_getMediaData(){const{card:e}=this.state,t=this._getComponent("media"),a=t&&t.data,i=a&&a.id&&e?e.media_entities[a.id]:void 0,r=a&&a.overlay,n=a&&a.aspect_ratio;return a?Object.assign({},a.destination?{destination:a.destination}:null,{aspect_ratio:n,mediaEntity:i,overlay:r}):void 0}_getPollData(){const e=this._getComponent("poll");return e?e.data:null}_getComponent(e){const{card:t,state:a}=this.state,{isDataSaverEnabled:i}=this.props;if(!t)throw new Error("No card data available");const r=i?Ut:a,n=(t.components[r]||t.components[Bt]).map(e=>t.components_data[e]).find(t=>t.type===e);return n||void 0}_getVanityText(e){const{card:t}=this.state;if(!t)return;const a=t.destinations[e];if(a)switch(a.type){case $t:case Gt:case Ht:return a.data.url_data.vanity;case Vt:return a.data.action_data.vanity;default:return}}_renderPreconnectTags(){const e=this._getDetailData(),{card:t,interactionLikely:a}=this.state,{isPromoted:i}=this.props;if(!e||!e.destination||!t)return null;const r=t.destinations[e.destination];if(r.type!==$t)return null;const n=r.data.url_data.url,o=r.data.url_data.vanity;if(!o)return null;const s=a||i,d=a&&i;return s?c.createElement(c.Fragment,null,d?c.createElement("link",{href:n,rel:"prerender"}):null,s?c.createElement("link",{href:n,rel:"preconnect"}):null,s?c.createElement("link",{href:"//"+o,rel:"preconnect"}):null):null}_convertCard(e){const{card:t,cardState:a,cardContext:i,initialCarouselIndex:r}=e,n=Ki(t,i),o=a||!!this.state&&this.state.state||n&&n.state||void 0;return n&&o?Object.assign({},n,{state:o,carouselIndex:r}):null}}d()(Xi,"defaultProps",{isDataSaverEnabled:!1,isInteractive:!0,isPromoted:!1,withInteractiveStyling:!0}),d()(Xi,"Context",c.createContext(Object.freeze({}))),Xi.propTypes={};var Qi=Xi;const Yi=F.a.isTwitterLiteAPK(),Zi=O.a.ac4c73d8,er={objectFitVideo:"cover"};class tr extends c.Component{constructor(e,t){super(e,t),d()(this,"_getCardState",()=>{const{cardState:e,card:t}=this.props;return"player"===t.name&&Yi?"static":e}),d()(this,"_updateBroadcastCard",([e])=>{const{broadcastId:t,updateBroadcastCard:a,createLocalApiErrorHandler:i}=this.props;t&&a(e,t).catch(i())}),d()(this,"_handleRequestCardUpdate",()=>{const{loggedInUserId:e}=this.context,{card:t,requestCardUpdate:a,createLocalApiErrorHandler:i}=this.props;return t.name===p.b.TwitterBroadcast?this._updateBroadcastCard:e?(e,t)=>{let r=Object.assign({},t);a(e,r).catch(i())}:void 0}),d()(this,"_handlePromotedLogEvent",({action:e,componentType:t,buttonIndex:a,isAuthRequired:i,ucPromotedMetadata:r})=>{const{createLocalApiErrorHandler:n,cardContext:o,log:s,promotedContent:d}=this.props,{loggedInUserId:l}=this.context;if((!i||l)&&d&&o){const{disclosure_type:i,impression_id:l}=d;s({disclosureType:i,itemId:o.tweetId,itemType:ge.c.TWEET,params:Object.assign({impression_id:l},P(e,t,a,r))}).catch(n())}}),d()(this,"_handleScribeEvent",({action:e,componentType:t,cardName:a,cardUrl:i,ctaIndex:r,element:n,isMessageMe:o,isAuthRequired:s})=>{const{analytics:d,cardContext:l,promotedContent:c}=this.props,{loggedInUserId:_}=this.context,p="unified_card_app_store_open_link"===e?"open_link":e,u=c&&"earned"!==Object(T.a)(c)?c.impression_id:void 0;if(s&&!_)return;const m={action:p,data:{items:[he.a.getHWCardItem(Object.assign({componentType:t,cardName:a,cardUrl:i,ctaIndex:r,tweetId:l.tweetId,tweetUserId:l.tweetUserId},o?{viewingUserId:_}:null,{isUCAppInstall:"unified_card_app_store_open_link"===e,impressionId:u}))]}};d.scribe(n?Object.assign({element:n},m):m)}),d()(this,"_handlePollVote",({choice:e,cardId:t})=>{const{cardContext:{tweetId:a},vote:i}=this.props;i(t,{selectedIndex:e,tweetId:a})}),d()(this,"_handleEventReminderClick",({cardId:e,eventId:t,notificationId:a,remindMe:i})=>{const{remindMeButtonSubscribe:r,remindMeButtonUnsubscribe:n}=this.props;i?r(e,t,{remind_me:i,notification_id:a}):n(e,t,{remind_me:i,notification_id:a})}),d()(this,"_transformUrl",(e,t)=>{var a;if(!t)return Object(be.a)(e,null==(a=this.props.promotedContent)?void 0:a.click_tracking_info);const{promotedContent:i,analytics:r}=this.props,{page:n,section:o,component:s,element:d,action:l}=t;return{pathname:Object(be.a)(e,null==i?void 0:i.click_tracking_info),state:{referringScribeNamespace:Object.assign({},r.contextualScribeNamespace,void 0!==n?{page:n}:null,void 0!==o?{section:o}:null,void 0!==s?{component:s}:null,void 0!==d?{element:d}:null,void 0!==l?{action:l}:null)}}}),d()(this,"_renderVideoPlayer",(e,t,a)=>{const{cardContext:{tweetId:i},promotedContent:n}=this.props,{impression_id:s}=n||{};if("live_broadcast"===e.type){const{broadcast_id:r,aspect_ratio:o,content_id:d,poster_image:l,timecode:_}=e;return c.createElement(Ee.a,{accessibilityLabel:Zi,aspectRatio:a||o,customOverlay:me,displayOptions:er,forceFullPreviewImage:"suboptimal"===t,poster:l,promotedContent:n,source:{contentId:d,videoId:Le.b.forBroadcast(r,i,s)},timecode:_,videoType:"video"})}if("tweet_video"===e.type)return c.createElement(De,o()({},e,{promotedContent:n}));if("uc_video"===e.type){const{original_info:d}=e,l=r()(e,["type","original_info"]),_=Object(L.a)(Le.b.forTweet(i||"",s),Object.assign({},l,{original_info:Object.assign({},d),type:"video"})),p=r()(_,["accessibilityLabel","backgroundColor","primaryLabel","secondaryLabel"]);return a&&(p.aspectRatio=a),c.createElement(Ee.a,o()({forceFullPreviewImage:"suboptimal"===t},p,{accessibilityLabel:Zi,promotedContent:n}))}{const{aspect_ratio:r,content_id:o,duration_ms:s,poster_image:d,variants:l,vmap_url:_}=e,p=l&&l.filter(e=>!!e.src);return i?c.createElement(Ee.a,{accessibilityLabel:Zi,aspectRatio:a||r,durationMs:s,forceFullPreviewImage:"suboptimal"===t,poster:d,promotedContent:n,source:Object.assign({contentId:o},p&&p.length>0?{variants:p.map(e=>({content_type:e.type,url:e.src}))}:null,{videoId:{type:"tweet",id:i},vmapUrl:_}),videoType:"vine"===e.type?"vine":"video"}):null}}),_e({history:e.history,updateCardState:e.updateCardState})}render(){const{dmSentOrReceived:e,isDataSaverEnabled:t,promotedContent:a,card:i,cardContext:r,isInteractive:n,withSquareBottomBorderRadius:o,nativeID:s,initialCarouselIndex:d}=this.props,_=R.a.isTrue("unified_cards_cta_color_blue_cta"),p={cardMediaDomId:l.c,cardDetailDomId:l.a};return c.createElement(ye.a,null,l=>c.createElement(Qi,{a11yDomIds:p,card:i,cardContext:r,cardState:this._getCardState(),dmSentOrReceived:e,initialCarouselIndex:d,isDataSaverEnabled:t,isInteractive:n,isPromoted:!!a,nativeID:s,onEventReminderClick:l(this._handleEventReminderClick),onPollVote:l(this._handlePollVote),onPromotedLogEvent:this._handlePromotedLogEvent,onScribeEvent:this._handleScribeEvent,promotedContent:a,renderVideoPlayer:this._renderVideoPlayer,requestCardUpdate:this._handleRequestCardUpdate(),testIDs:ve,transformUrl:this._transformUrl,useBlueButtonForAppDetails:_,withSquareBottomBorderRadius:o}))}}d()(tr,"contextType",_.a);const ar=E(Object(je.a)(tr));t.default=ar}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.HWCard.3fb9c0d5.js.map