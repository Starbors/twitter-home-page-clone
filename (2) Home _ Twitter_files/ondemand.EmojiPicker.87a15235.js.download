(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{"5RdJ":function(e,t,s){"use strict";s.r(t);var i=s("97Jx"),o=s.n(i),r=s("ERkP"),n=s("+cai"),a=(s("wFPu"),s("IAdD"),s("kYxP"),s("KEM+")),c=s.n(a),l=s("py1r"),h=s("I4+6"),d=s("oLZl"),u=s("rHpw"),m=s("MWbm");const p=h.a.generate({backgroundColor:"transparent",color:u.a.theme.colors.primary});class f extends r.PureComponent{constructor(...e){super(...e),c()(this,"_handleClick",()=>{const{category:e,onClick:t}=this.props;t(e)}),c()(this,"_handleKeyDown",e=>{const{key:t}=e,{altKey:s,ctrlKey:i,metaKey:o}=e;s||i||o||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())})}render(){const{icon:e,isActive:t,isDisabled:s}=this.props;return r.createElement(l.a,{disabled:s},({isHovered:i,isPressed:o,isFocused:n})=>r.createElement(m.a,{accessibilityRole:"button",disabled:s,onClick:this._handleClick,onKeyDown:n?this._handleKeyDown:void 0,style:[g.wrapper,i||t?void 0:g.faded,t&&g.active,p.transitionStyle,i&&p.hoverStyle,o&&p.pressedStyle,n&&p.focusedStyle]},e))}}const g=u.a.create(e=>({wrapper:{alignItems:"center",borderBottomWidth:e.borderWidths.medium,borderBottomStyle:"solid",borderBottomColor:"transparent",flex:1,paddingVertical:e.spaces.xxSmall},active:{borderBottomColor:e.colors.primary},faded:{filter:"grayscale(100%) contrast(80%)",opacity:.5}}));var _=f,y=s("z4Oz");const S=(e,t)=>{const s=t&&t.codepoint;if(!(s&&v(e.skin_variations,s)>1))return s&&e.skin_variations&&e.skin_variations[s]?e.skin_variations[s]:void 0},v=(e={},t)=>{let s=0;for(const i in e)t&&i.indexOf(t)>=0&&(s+=1);return s},w=()=>"emojiPicker-"+Math.random();var C=s("U+bB"),k=s("3XMw"),j=s.n(k);const b="none",E="light",R="medium-light",I="medium",P="medium-dark",x="dark",T={[b]:{id:b,name:j.a.ff3dd27b,color:"#FFDC5D"},[E]:{codepoint:"1f3fb",id:E,name:j.a.b554fcf3,color:"#F7DECE"},[R]:{codepoint:"1f3fc",id:R,name:j.a.j590b148,color:"#F3D2A2"},[I]:{codepoint:"1f3fd",id:I,name:j.a.e7d4ee85,color:"#D5AB88"},[P]:{codepoint:"1f3fe",id:P,name:j.a.ia423ebb,color:"#AF7E57"},[x]:{codepoint:"1f3ff",id:x,name:j.a.a2cf0941,color:"#7C533E"}},D={search:j.a.j824dc05,notFoundHeader:j.a.e39c4391,notFoundMessage:j.a.f2625275,skintext:j.a.d67ad795,clear:j.a.e6388bfa,recentCategoryName:j.a.j7c67ec9,searchCategoryName:j.a.da539d38},F={EmojiWidth:u.a.theme.spaces.medium,EmojiHeight:u.a.theme.spaces.medium,EmojiGutter:u.a.theme.spaces.xxSmall},H="search",O="recent";class L extends r.PureComponent{render(){const{accessibilityLabel:e,skinTone:t,emoji:s,style:i}=this.props,o=((e,t)=>{const s=(S(e,t)||e).unified;return y.a.getTwemojiUrl(s)})(s,t);return o?r.createElement(C.a,{accessibilityLabel:e,alt:s.name,draggable:!1,resizeMode:"stretch",source:o,style:[A.root,i]}):null}}const A=u.a.create(e=>({root:{height:F.EmojiHeight,width:F.EmojiWidth}}));var B=L;const z={people:"😀",nature:"🐻",food:"🍔",activity:"⚽️",travel:"🚘",objects:"💡",symbols:"🔣",flags:"🚩",recent:"🕑"};class U extends r.PureComponent{render(){const{activeCategory:e,categories:t,onAnchorClick:s,disableAll:i}=this.props;return r.createElement(m.a,{style:M.root},t.map(t=>{const{anchorless:o,emojis:n,id:a,name:c}=t,l=n&&0===n.length||i,h=!!e&&t.id===e.id;return o?null:r.createElement(_,{category:t,icon:this._getIcon(a,c),isActive:h,isDisabled:l,key:a,onClick:s})}))}_getIcon(e,t){const{emojiData:s}=this.props,i=s[z[e]];return r.createElement(B,{accessibilityLabel:t,emoji:i})}}const M=u.a.create(e=>({root:{flexDirection:"row",justifyContent:"space-between"}}));var N=U,K=s("t62R"),W=s("/yvb"),V=s("2ZFc");class G extends r.PureComponent{constructor(...e){super(...e),c()(this,"_handleHover",()=>{const{emoji:e,onHover:t}=this.props;t&&t(e)}),c()(this,"_handleFocus",()=>{const{emoji:e,onFocus:t}=this.props;t&&t(e)}),c()(this,"_getBackgroundPositionStyle",()=>{const{emoji:e,spriteSheetColumns:t,spriteSheetRows:s}=this.props,i=this.props.spritePosition||e.sprite_position,o=100/(s-1);return`${100/(t-1)*i[0]}% ${o*i[1]}%`}),c()(this,"_handleClick",()=>{const{emoji:e,onSelect:t}=this.props;t&&t(e)})}render(){const{ariaDescendantId:e,emoji:t,emojiName:s,spriteUrl:i}=this.props,o={backgroundImage:`url(${i})`,backgroundPosition:this._getBackgroundPositionStyle(),backgroundSize:`${100*this.props.spriteSheetColumns}% ${100*this.props.spriteSheetRows}%`};return r.createElement(l.a,{onFocusRingGained:this._handleFocus,onHoverIn:this._handleHover},({isFocused:i,isHovered:n,isPressed:a})=>r.createElement(m.a,{accessibilityLabel:s||t.name,accessibilityRole:"option",accessibilityState:{selected:!!e},nativeID:e,onClick:this._handleClick,style:[J.container,q.transitionStyle,n&&q.hoverStyle,a&&q.pressedStyle,(i||e)&&q.focusedStyle]},r.createElement(m.a,{style:[o,J.emoji]})))}}const q=h.a.generate({backgroundColor:u.a.theme.colors.transparent,color:u.a.theme.colors.deepGray}),J=u.a.create(e=>({container:{alignItems:"center",borderRadius:e.borderRadii.medium,boxSizing:"border-box",padding:F.EmojiGutter},emoji:{display:"inline-block",outlineStyle:"none",height:F.EmojiHeight,width:F.EmojiWidth}}));var $=G,Y=s("FIs5"),Z=s("mtvn"),Q=s("7nmT"),X=s.n(Q);class ee extends r.PureComponent{render(){const{children:e,style:t,withTopBorder:s}=this.props;return r.createElement(m.a,{style:[te.root,s?te.topBorder:te.bottomBorder,t]},e)}}c()(ee,"defaultProps",{withTopBorder:!1});const te=u.a.create(e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,padding:e.spaces.xSmall},bottomBorder:{borderBottomWidth:e.borderWidths.small},topBorder:{borderTopWidth:e.borderWidths.small}}));var se=ee,ie=s("LdEA"),oe=s.n(ie),re=s("OiMc");class ne extends r.PureComponent{constructor(...e){super(...e),c()(this,"_chunk",(e,t)=>{const s=null==e?0:e.length;if(!s||t<1)return[];let i=0,o=0;const r=new Array(Math.ceil(s/t));for(;i<s;)r[o]=e.slice(i,i+=t),o+=1;return r}),c()(this,"_createDismissOnSelect",e=>t=>{const{onSelect:s}=this.props;e(),s&&s(t)}),c()(this,"_getEmojisForActiveSkinTone",e=>{const t=this.props,{activeSkinTone:s,emoji:i}=t,n=oe()(t,["activeSkinTone","emoji"]),{codepoint:a}=s,{skin_variations:c}=i,l=[r.createElement($,o()({},n,{emoji:Object.assign({},i),key:"none",onSelect:this._createDismissOnSelect(e),spritePosition:i.sprite_position}))];for(const t in c)if(a&&t.indexOf(a)>=0){const{unified:s,sprite_position:a}=c[t];l.push(r.createElement($,o()({},n,{emoji:Object.assign({},i,{text:s}),key:t,onSelect:this._createDismissOnSelect(e),spritePosition:a})))}return l}),c()(this,"renderEmojis",e=>{const t=this._chunk(this._getEmojisForActiveSkinTone(e),10);return r.createElement(m.a,{style:ae.emojisContainer},t.map((e,t)=>r.createElement(m.a,{key:t,style:ae.row},e)))})}render(){const e=this.props,{emoji:t}=e,s=oe()(e,["activeSkinTone","emoji","onSelect"]);return r.createElement(re.a,{contentStyle:ae.contentStyle,renderContent:this.renderEmojis,withArrow:!0},r.createElement($,o()({},s,{emoji:t,spritePosition:t.sprite_position})))}}const ae=u.a.create(e=>({row:{flexDirection:"row"},contentStyle:{minWidth:"100%"},emojisContainer:{padding:e.spaces.xSmall}}));var ce=ne;class le extends r.PureComponent{render(){const e=this.props,{activeSkinTone:t}=e,s=oe()(e,["activeSkinTone"]),{emoji:i}=this.props,{skin_variations:n}=i,{codepoint:a}=t,c=v(n,a),l=a&&n&&n[a];return 0!==c||l?1===c&&l?r.createElement($,o()({},s,{spritePosition:l.sprite_position})):r.createElement(ce,o()({},s,{activeSkinTone:t})):r.createElement($,o()({},s,{spritePosition:i.sprite_position}))}}var he=le,de=r.forwardRef((function(e,t){const[s,i]=r.useState(!0),n=r.useRef({containerRef:null,intersectionObserver:window.IntersectionObserver&&new window.IntersectionObserver((e,t)=>{const{intersectionObserver:s}=n.current;e.some(e=>e.isIntersecting)&&s&&(s.disconnect(),i(!1))})});r.useLayoutEffect(()=>{s&&e.isActiveCategory&&i(!1)},[s,e.isActiveCategory]),r.useEffect(()=>{const{containerRef:e,intersectionObserver:t}=n.current;e&&t&&t.observe(e)},[n.current.containerRef,n.current.intersectionObserver]);const a=r.useMemo(()=>e=>{const s=X.a.findDOMNode(e);s instanceof HTMLElement?n.current.containerRef=s:n.current.containerRef=null,"function"==typeof t&&t(e)},[t]);return s?r.createElement(ue,o()({ref:a},e,{withPlaceholder:!0})):r.createElement(ue,o()({},e,{ref:t}))}));class ue extends r.PureComponent{constructor(e){super(e),c()(this,"_top",0),c()(this,"_bottom",0),c()(this,"_renderEmptyState",()=>{const{notFoundHeader:e,notFoundMessage:t}=D;return r.createElement(Y.a,{header:e,message:t})}),c()(this,"updatePosition",()=>{const e=X.a.findDOMNode(this._containerRef.current),t=e&&e.parentNode;if(e&&e instanceof window.HTMLElement&&t&&t instanceof window.HTMLElement){const{top:s,height:i}=e.getBoundingClientRect(),{top:o}=t.getBoundingClientRect();this._top=s-o+t.scrollTop,this._bottom=this._top+i}}),c()(this,"getTop",()=>this._top),c()(this,"getBottom",()=>this._bottom),this._containerRef=r.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){e.emojiIDs!==this.props.emojiIDs&&this.updatePosition()}render(){const{name:e,emojiIDs:t,headerButton:s,onStickyHeaderRef:i,withEmptyState:o}=this.props,n=t.length>0||o;return r.createElement(m.a,{key:e,ref:this._containerRef},r.createElement(m.a,{key:e,ref:this._containerRef,style:n?me.shown:me.hidden},r.createElement(m.a,{ref:i,style:me.headerContainer},r.createElement(se,{style:me.headerSection},r.createElement(K.c,{size:"large",style:me.header,weight:"bold"},e),s)),o?this._renderEmptyState():r.createElement(se,null,this._renderEmojis())))}_renderEmojis(){const{emojiIDs:e,rowSize:t}=this.props,s=Math.ceil(e.length/t),i=Object(Z.a)(0,s);return r.createElement(m.a,{style:me.emojiGroup},i.map(s=>{const i=e.slice(s*t,(s+1)*t);return r.createElement(m.a,{key:"emoji-row-"+s,style:me.emojiRow},this.props.withPlaceholder?r.createElement(m.a,{style:[me.rowItem,me.spacer]}):this._renderRow(i))}))}_renderRow(e){const{activeSkinTone:t,ariaDescendantId:s,data:i,focusedEmojiId:n,onFocusedEmojiRef:a,onEmojiFocus:c,onEmojiHover:l,rowSize:h,onSelect:d,spriteUrl:u}=this.props;return Object(Z.a)(0,h).map(h=>{const p=e[h];if(!p)return r.createElement(m.a,{key:"row-spacer-"+h,style:me.rowItem},r.createElement(m.a,{style:me.spacer}));const f=i.emojis[p.toLowerCase()];if(!f)return null;const g=!!f.skin_variations,{spriteSheetColumns:_,spriteSheetRows:y}=i,S={ariaDescendantId:p===n?s:void 0,emoji:f,onFocus:c,onHover:l,onSelect:d,spriteUrl:u,spriteSheetRows:y,spriteSheetColumns:_};return r.createElement(m.a,{key:f.unified,ref:p===n?a:void 0,style:me.rowItem},g?r.createElement(he,o()({},S,{activeSkinTone:t})):r.createElement($,S))})}updateDisplay(e){const t=X.a.findDOMNode(this._containerRef.current);t&&t instanceof window.HTMLElement&&t.style&&(t.style.display=e?"flex":"none")}}c()(ue,"defaultProps",{headerButton:null,rowSize:9,withEmptyState:!1});const me=u.a.create(e=>({emojiGroup:{flexDirection:"column",flexWrap:"wrap"},emojiRow:{flexDirection:"row",justifyContent:"space-between"},header:{paddingHorizontal:e.spaces.xxSmall},headerSection:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},headerContainer:{position:"sticky",top:0,zIndex:1},hidden:{display:"none"},shown:{display:"flex"},rowItem:{flex:1},spacer:{alignSelf:"center",margin:F.EmojiGutter,height:F.EmojiHeight,width:F.EmojiWidth}}));var pe=s("zrc3"),fe=s("Myq3"),ge=s("EhiH");class _e{constructor(e,t,s){this._categories=e,this._rowSize=s,this._emojis=t}getInitialFocus(){const e=Object(pe.a)(this._categories,e=>e.emojis.length>0);return this.formatFocusParams(0,0,this._categories[e])}getCategoryById(e){const t=Object(pe.a)(this._categories,t=>t.id===e);return this._categories[t]}getPreviousCategory(e){if(e===H)return;const t=Object(pe.a)(this._categories,t=>t.id===e);return Object(fe.a)(this._categories.slice(0,t),e=>e.emojis.length>0)}getNextCategory(e){if(e===H)return;const t=Object(pe.a)(this._categories,t=>t.id===e)+1;return Object(ge.a)(this._categories.slice(t,this._categories.length),e=>e.emojis.length>0)}getCategoryLastRow(e){const{length:t}=e.emojis;return t<this._rowSize?0:Math.ceil(t/this._rowSize)-1}getLastRowLength(e){const{length:t}=e.emojis;return t?t%this._rowSize||this._rowSize:0}formatFocusParams(e,t,s){const i=s.emojis[e*this._rowSize+t];return{focusRow:e,focusCol:t,focusCategoryId:s.id,focusItem:i,previewEmoji:this._emojis[i]}}focusCategory(e){return this.formatFocusParams(0,0,this.getCategoryById(e))}focusNextColumn({focusRow:e,focusCol:t,focusCategoryId:s}){if(e<0||t<0||!s)return this.getInitialFocus();let i=e,o=t,r=this.getCategoryById(s);if(i*this._rowSize+o+1>=r.emojis.length){if(r=this.getNextCategory(s),!r)return this.formatFocusParams(e,t,this.getCategoryById(s));i=0,o=0}else i+=o===this._rowSize-1?1:0,o=o===this._rowSize-1?0:o+1;return this.formatFocusParams(i,o,r)}focusPreviousColumn({focusRow:e,focusCol:t,focusCategoryId:s}){if(e<0||t<0||!s)return this.getInitialFocus();let i=e,o=t,r=this.getCategoryById(s);if(i*this._rowSize+o-1<0){if(r=this.getPreviousCategory(s),!r)return this.formatFocusParams(e,t,this.getCategoryById(s));i=this.getCategoryLastRow(r),o=this.getLastRowLength(r)-1}else i-=0===o?1:0,o=0===o?this._rowSize-1:o-1;return this.formatFocusParams(i,o,r)}focusNextRow({focusRow:e,focusCol:t,focusCategoryId:s}){if(e<0||t<0||!s)return this.getInitialFocus();let i=e,o=t,r=this.getCategoryById(s);if(i*this._rowSize+o+this._rowSize>=r.emojis.length)if(i<this.getCategoryLastRow(r))i+=1,o=this.getLastRowLength(r)-1;else{if(r=this.getNextCategory(s),!r)return this.formatFocusParams(e,t,this.getCategoryById(s));i=0,o=Math.min(o,r.emojis.length-1)}else i+=1;return this.formatFocusParams(i,o,r)}focusPreviousRow({focusRow:e,focusCol:t,focusCategoryId:s}){if(e<0||t<0||!s)return this.getInitialFocus();let i=e,o=t,r=this.getCategoryById(s);if(i*this._rowSize+o-this._rowSize<0){if(r=this.getPreviousCategory(s),!r)return this.formatFocusParams(e,t,this.getCategoryById(s));i=this.getCategoryLastRow(r),o=Math.min(o,this.getLastRowLength(r)-1)}else i-=1;return this.formatFocusParams(i,o,r)}}var ye=s("xoZN"),Se=(s("LJOr"),s("VY6S")),ve=(s("Ysgh"),s("s1N3")),we=s("tn7R");function Ce(e,t){const s=[...t];let i=0,o=e;for(;i<s.length;){const e=o.children[s[i]];if(!e)break;i+=1,o=e}return{node:o,tail:s.slice(i)}}function ke(e,t,s){const{node:i,tail:o}=Ce(e,t);let r=i;o.forEach((e,t)=>{const s={results:[],children:{}};r.children[e]=s,r=s}),r.results?r.results.push(s):r.results=[s]}function je(e,t){const{node:s,tail:i}=Ce(e,t);if(!s||i.length>0)return[];const o=[];return function e(t){t.results.length&&o.push(...t.results),Object(we.a)(t.children).forEach(t=>e(t))}(s),Object(ve.a)(o)}const be=(e,t)=>{const s=Object(ve.a)(e),i=Object(ve.a)(t);return s.filter(e=>i.indexOf(e)>=0)};var Ee=class{constructor(e){c()(this,"_getScoreAndInsertResults",(e,t,s)=>{const i={};for(const o in e){const r=e[o],{search:n}=r,a=n.indexOf(t);if(-1!==a){let e=a+1;t===o&&(e=0),ke(s,t,r),i[o]=e}}return i}),this._data=e,this._index={results:[],children:{}},this._originalEmojis=this._data.emojis}search(e,t){const s=t&&t.maxResults?t.maxResults:75;let i=[];const o=this._originalEmojis,r=this._index;if(e.length){let t=e.toLowerCase().split(/[\s|,|\-|_]+/);t=t.slice(0,2);const s=t.map(e=>{let t=[];const s=je(r,e);if(0===s.length){const s=this._getScoreAndInsertResults(o,e,r);t=je(r,e),t.sort((e,t)=>s[e.id]-s[t.id])}else t=s;return t}).filter(e=>!!e);i=s.length>1?be(...s):s.length?s[0]:[]}return i.length>s&&(i=i.slice(0,s)),i}},Re=s("6OUF"),Ie=s("VwDm");class Pe extends r.PureComponent{constructor(e){super(e),c()(this,"_handleChange",e=>{const t=e.target&&e.target.value||"";this.setState({query:t}),this._debouncedHandleSearch(t)}),c()(this,"_handleClear",()=>{this.setState({query:""}),this._debouncedHandleSearch("")}),c()(this,"_handleSearch",e=>{const{maxResults:t,onSearch:s}=this.props;s(e,this._emojiIndex.search(e,{maxResults:t}))}),c()(this,"_setTextInputRef",e=>{this._inputRef=e}),this.state={query:""};const{data:t}=this.props;this._emojiIndex=new Ee(t),this._debouncedHandleSearch=Object(Se.a)(this._handleSearch,100)}UNSAFE_componentWillUpdate(e){0}render(){const{ariaActiveDescendant:e,autoFocus:t,categoriesDomId:s}=this.props;return r.createElement(m.a,{accessibilityRole:"combobox"},r.createElement(Re.a,{Icon:Ie.a,ariaActiveDescendant:e,ariaControls:s,ariaExpanded:!0,ariaLabel:D.search,autoFocus:t,inputStyle:xe.textInput,onChange:this._handleChange,onClear:this._handleClear,placeholder:D.search,ref:this._setTextInputRef,style:xe.fieldTextInput,withClearButton:!0}))}focus(){this._inputRef&&this._inputRef.focus()}}c()(Pe,"defaultProps",{autoFocus:!1,maxResults:75,onSearch:()=>{}});const xe=u.a.create(e=>({textInput:{paddingVertical:e.spaces.xxSmall,paddingLeft:e.spaces.xxSmall},fieldTextInput:{margin:e.spaces.xxSmall}}));var Te=Pe,De=s("IMYl");class Fe extends r.Component{constructor(...e){super(...e),c()(this,"_handleFocus",()=>{const{onFocus:e,skinTone:t}=this.props;e&&e(t)}),c()(this,"_handleFocusLost",()=>{const{onFocusLost:e,skinTone:t}=this.props;e&&e(t)}),c()(this,"_handleHover",()=>{const{onHover:e,skinTone:t}=this.props;e&&e(t)}),c()(this,"_handleHoverLeave",()=>{const{onHoverLeave:e,skinTone:t}=this.props;e&&e(t)}),c()(this,"_handleClick",()=>{const{onSelect:e,skinTone:t}=this.props;e&&e(t)}),c()(this,"_handleKeyDown",e=>{const{key:t}=e,{altKey:s,ctrlKey:i,metaKey:o}=e;s||i||o||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())})}render(){const{accessibilityLabel:e,skinTone:t,isSelected:s,accessibilityRole:i,style:o}=this.props,n=h.a.generate({backgroundColor:t.color,color:u.a.theme.colors.white});return r.createElement(l.a,{onFocusRingGained:this._handleFocus,onFocusRingLost:this._handleFocusLost,onHoverIn:this._handleHover,onHoverOut:this._handleHoverLeave},({isHovered:a,isFocused:c,isPressed:l})=>r.createElement(m.a,{accessibilityLabel:e,accessibilityRole:i||"button",accessibilityState:{checked:!!s},accessible:!0,onClick:this._handleClick,onKeyDown:c?this._handleKeyDown:void 0,style:o},r.createElement(m.a,{style:[He.root,{backgroundColor:t.color},n.transitionStyle,(a||c)&&n.focusedStyle,(l||s)&&He.selected]},s?r.createElement(De.a,{style:He.checkmarkIcon}):null)))}}const He=u.a.create(e=>({outer:{paddingLeft:e.spaces.xxSmall},root:{alignItems:"center",justifyContent:"center",height:"1.25em",width:"1.25em",borderRadius:e.borderRadii.infinite},selected:{boxShadow:`0 0 0 ${e.borderWidths.medium} ${e.colors.primary}`},checkmarkIcon:{height:"1em",width:"1em",color:e.colors.cellBackground}}));var Oe=Fe;class Le extends r.Component{constructor(...e){super(...e),c()(this,"state",{showPalette:!1,focusedOption:void 0,hoveredOption:void 0}),c()(this,"_renderPalette",()=>{const{activeSkinTone:e}=this.props;return r.createElement(m.a,{accessibilityRole:"radiogroup",style:Ae.palette},Object(we.a)(T).map(t=>{const s=t===e;return r.createElement(Oe,{accessibilityLabel:t.name,accessibilityRole:"radio",isSelected:s,key:t.id,onFocus:this._handleSkinToneFocus,onFocusLost:this._handleSkinToneFocusLost,onHover:this._handleSkinToneHover,onHoverLeave:this._handleSkinToneHoverLeave,onSelect:this._handleSkinToneSelectionClick,skinTone:t,style:Ae.skinToneOption})}))}),c()(this,"_renderCurrentSkinTone",()=>{const{activeSkinTone:e}=this.props;return r.createElement(Oe,{accessibilityLabel:D.skintext,isSelected:!0,onSelect:this._handleShowPaletteClick,skinTone:e})}),c()(this,"_handleShowPaletteClick",()=>{this.setState({showPalette:!0})}),c()(this,"_handleSkinToneSelectionClick",e=>{this.setState({showPalette:!1}),this.props.onSelect(e)}),c()(this,"_handleSkinToneHover",e=>{this.setState({hoveredOption:e},this._handlePreview)}),c()(this,"_handleSkinToneHoverLeave",e=>{this.setState({hoveredOption:void 0},this._handlePreview)}),c()(this,"_handleSkinToneFocus",e=>{this.setState({focusedOption:e},this._handlePreview)}),c()(this,"_handleSkinToneFocusLost",e=>{this.setState({focusedOption:void 0},this._handlePreview)}),c()(this,"_handlePreview",()=>{const{onPreview:e}=this.props;e&&e(this.state.hoveredOption||this.state.focusedOption)})}render(){const{showPalette:e}=this.state,{style:t}=this.props;return r.createElement(m.a,{style:t},e?this._renderPalette():this._renderCurrentSkinTone())}}const Ae=u.a.create(e=>({palette:{flexDirection:"row"},skinToneOption:{paddingHorizontal:e.spaces.micro}}));var Be=Le,ze=s("iChn");const Ue={name:"a",keywords:"j",sprite_position:"k",skin_variations:"l"},Me={unified:"key",skin_tone:"d",sprite_position:"k"},Ne=e=>{const t=[],s=(e,s)=>{e&&(Array.isArray(e)?e:[e]).forEach(e=>{(s?e.split(/[-|_|\s]+/):[e]).forEach(e=>{const s=e.toLowerCase();-1===t.indexOf(s)&&t.push(s)})})};return s(e.short_names,!0),s(e.name,!0),s(e.keywords,!1),t.join(",")},Ke=(e,t)=>{for(const s in t)e[s]=e[t[s]],delete e[t[s]]};var We=s("Qyxo"),Ve=s("Iok7");const Ge=[H,O];class qe extends r.PureComponent{constructor(e){super(e),c()(this,"_categoryRefs",{}),c()(this,"_shouldScrollToFocusedItem",!0),c()(this,"_shouldUpdateScrollPosition",!1),c()(this,"_renderAnchors",e=>{const{activeCategory:t,query:s}=this.state;return r.createElement(N,{activeCategory:s?void 0:t,categories:e,disableAll:!!s,emojiData:this._uncompressedData.emojis,onAnchorClick:this._handleAnchorClick})}),c()(this,"_renderSearch",()=>r.createElement(Te,{ariaActiveDescendant:this.state.ariaDescendantId,autoFocus:!0,categoriesDomId:"emoji_picker_categories_dom_id",data:this._uncompressedData,onSearch:this._handleSearch,ref:this._searchRef})),c()(this,"_renderCategories",e=>{const{spriteUrl:t,rowSize:s}=this.props,{activeSkinTone:i,activeCategory:n,ariaDescendantId:a,focusCategoryId:c,focusItem:l,query:h}=this.state;return r.createElement(Ve.a,{accessibilityRole:"listbox",nativeID:"emoji_picker_categories_dom_id",onMouseLeave:this._handleClearPreview,onScroll:this._handleScroll,ref:this._scrollRef,scrollEventThrottle:100,style:Je.categoriesContainer},e.map((e,d)=>{const u=c===e.id,m=n&&n.id===e.id,p={activeSkinTone:i,ariaDescendantId:u?a:void 0,data:this._uncompressedData,emojiIDs:e.emojis,focusedEmojiId:u?l:void 0,id:e.id,isActiveCategory:m,name:e.name,onEmojiFocus:this._handleEmojiPreview,onEmojiHover:this._handleEmojiPreview,onFocusedEmojiRef:u?this._handleFocusedItemRef:void 0,onSelect:this._handleSelect,onStickyHeaderRef:m?this._handleStickyHeaderRef:void 0,rowSize:s,spriteUrl:t};return"recent"===e.id&&(p.headerButton=r.createElement(W.a,{accessibilityLabel:D.clear,onPress:this._handleClearRecent,size:"small",type:"text"},D.clear)),e.id===H&&(p.withEmptyState=!e.emojis.length&&!!h),r.createElement(de,o()({},p,{key:e.name,ref:this._setCategoryRef("category-"+e.id)}))}))}),c()(this,"_scrollEmojiIntoViewIfNeeded",()=>{if(!this._shouldScrollToFocusedItem)return;const e=X.a.findDOMNode(this._focusedItemRef);e instanceof window.Element&&(!function(e,t,s=0){if(e&&t){const{height:i,top:o}=e.getBoundingClientRect(),r=o+s,{top:n,bottom:a}=t.getBoundingClientRect(),c=i+o;if(n<r){const t=r-n;e.scrollTop=Math.max(0,e.scrollTop-t)}else if(n>c||a>c){const t=a-c;e.scrollTop=Math.max(0,e.scrollTop+t)}}}(this._getScrollParent(),e,this._getStickyHeaderOffset()),this._shouldScrollToFocusedItem=!1)}),c()(this,"_handleStickyHeaderRef",e=>{this._stickyHeaderRef=e,this._stickyHeaderHeight=void 0,this._shouldScrollToFocusedItem=!0}),c()(this,"_handleFocusedItemRef",e=>{this._focusedItemRef=e,this._scrollEmojiIntoViewIfNeeded()}),c()(this,"_getStickyHeaderOffset",()=>{if(void 0===this._stickyHeaderHeight){const e=this._stickyHeaderRef&&X.a.findDOMNode(this._stickyHeaderRef);if(e instanceof window.Element){const{height:t}=e.getBoundingClientRect();this._stickyHeaderHeight=t}}return this._stickyHeaderHeight||0}),c()(this,"_handleSkinToneSelect",e=>{this.setState({activeSkinTone:e,previewSkinTone:void 0,withDescription:!0}),this._focusSearch()}),c()(this,"_handleSkinTonePreview",e=>{this.setState({previewSkinTone:e,withDescription:!1})}),c()(this,"_renderPreview",()=>{const{previewEmoji:e,activeSkinTone:t,previewSkinTone:s}=this.state,i=e||this._defaultPreviewEmoji,o=s||t;return r.createElement(W.a,{accessibilityLabel:i.name,icon:r.createElement(B,{emoji:i,skinTone:o,style:Je.twemoji}),onClick:this._handlePreviewClick,type:"text"})}),c()(this,"_handlePreviewClick",()=>{const{previewEmoji:e}=this.state,t=e||this._defaultPreviewEmoji;this._handleSelect(t)}),c()(this,"_renderEmojiDescription",()=>{const{previewEmoji:e}=this.state;return e?r.createElement(K.c,{align:"left",color:"deepGray",numberOfLines:1,size:"small",style:Je.emojiDescription},e.name):null}),c()(this,"_renderFooter",()=>{const{withDescription:e}=this.state;return r.createElement(m.a,{style:Je.footer},this._renderPreview(),e?this._renderEmojiDescription():null,r.createElement(Be,{activeSkinTone:this.state.activeSkinTone,onPreview:this._handleSkinTonePreview,onSelect:this._handleSkinToneSelect,style:Je.skinTonePicker}))}),c()(this,"_setCategoryRef",e=>t=>{this._categoryRefs[e]=t}),c()(this,"_handleKeyDown",e=>{const{key:t}=e,{altKey:s,ctrlKey:i,metaKey:o}=e,{focusRow:r,focusCol:n,focusCategoryId:a,focusItem:c}=this.state,l={focusRow:r,focusCol:n,focusCategoryId:a};if(!(s||i||o))return t===d.a.ArrowDown?(this._updateFocus(this._focusHelper.focusNextRow(l)),void e.preventDefault()):t===d.a.ArrowUp?(this._updateFocus(this._focusHelper.focusPreviousRow(l)),void e.preventDefault()):t===d.a.ArrowRight?(this._updateFocus(this._focusHelper.focusNextColumn(l)),void e.preventDefault()):t===d.a.ArrowLeft?(this._updateFocus(this._focusHelper.focusPreviousColumn(l)),void e.preventDefault()):t===d.a.Enter&&c?(this._handleSelect(this._uncompressedData.emojis[c]),void e.preventDefault()):void 0}),c()(this,"_updateFocus",e=>{const{ariaDescendantId:t,focusItem:s}=this.state,i=s!==e.focusItem;this._shouldScrollToFocusedItem=i,this.setState(Object.assign({},e,{ariaDescendantId:i?w():t}))}),c()(this,"_handleScroll",()=>{this._updateActiveCategory()}),c()(this,"_handleSearch",(e,t)=>{const s=t?t.map(e=>e.unified):[];Object(we.a)(this._categoryRefs).forEach(t=>{t&&"search"!==t.props.id&&t.updateDisplay(!e)}),this.setState({searchResults:s,query:e}),this._scrollTo(0)}),c()(this,"_handleSelect",e=>{const{onSelect:t}=this.props,{activeSkinTone:s}=this.state,i=((e,t)=>{const{name:s,short_names:i,text:o}=e,r=S(e,t),n=r?r.unified:e.unified;return{id:e.id||i[0],name:s,text:o||n,unified:n}})(e,s);t&&t(i),this._updateRecentEmojiList(e)}),c()(this,"_handleClearRecent",e=>{this.setState({recentlyUsed:[],activeCategory:this._staticCategories()[0]},()=>{this._shouldUpdateScrollPosition=!0})}),c()(this,"_getActiveCategory",()=>{const e=this._scrollRef.current&&X.a.findDOMNode(this._scrollRef.current);let t=this.state.activeCategory;if(e&&e instanceof window.HTMLElement){const{scrollTop:s}=e;for(let e=0;e<this._categories.length;e++){const i=this._categories[e],o=this._categoryRefs["category-"+i.id];if(o&&s>=o.getTop()&&s<o.getBottom()){t=i;break}}}return t}),c()(this,"_updateActiveCategory",()=>{const e=this._getActiveCategory();e!==this.state.activeCategory&&this.setState({activeCategory:e})}),c()(this,"_updateRecentEmojiList",e=>{const{recentlyUsed:t}=this.state,{rowSize:s}=this.props;t.length&&t[t.length-1]===e.unified||this.setState(t=>{const{recentlyUsed:i}=t,o=[...i.filter(t=>t!==e.unified),e.unified];return this._shouldUpdateScrollPosition=!0,{recentlyUsed:o.slice(-2*s)}})}),c()(this,"_handleClearPreview",()=>{this.state.previewEmoji&&this.setState({previewEmoji:void 0})}),c()(this,"_handleEmojiPreview",e=>{e!==this.state.previewEmoji&&this.setState({previewEmoji:e})}),c()(this,"_handleAnchorClick",e=>{this._shouldUpdateScrollPosition&&(this._shouldUpdateScrollPosition=!1,Object(we.a)(this._categoryRefs).forEach(e=>e.updatePosition()));const t=this._categoryRefs["category-"+e.id];0!==e.emojis.length&&(this.setState({activeCategory:e}),t&&this._scrollTo(t.getTop()+1),this.state.focusItem&&this._updateFocus(this._focusHelper.focusCategory(e.id))),this._focusSearch()}),c()(this,"_focusSearch",()=>{this._searchRef.current&&this._searchRef.current.focus()}),c()(this,"_scrollTo",e=>{this._scrollRef.current&&this._scrollRef.current.scrollTo({y:e,animated:!1})}),c()(this,"_staticCategories",()=>this._categories.filter(e=>-1===Ge.indexOf(e.id)));const{emojiInfo:t}=this.props;this._uncompressedData=(e=>{const t=JSON.parse(JSON.stringify(e));t.compressed=!1;for(const e in t.emojis){const s=t.emojis[e];Ke(s,Ue),s.id=e,s.unified=e,s.short_names=[e],s.text||(s.text=""),s.search=Ne(s),s.skin_variations&&(s.skin_variations.forEach(e=>{Ke(e,Me)}),s.skin_variations=Object(ze.a)(s.skin_variations,e=>{const{skin_tone:t}=e;let s=t[0];for(let e=1;e<t.length;e++)s+="+"+t[e];return s}))}return t})(t||{}),this._categories=this._uncompressedData.categories,this._searchCategoryInitialValue={anchorless:!0,id:H,name:D.searchCategoryName,emojis:[]},this._recentlyUsedCategoryInitialValue={id:O,name:D.recentCategoryName,emojis:[]},this._scrollRef=r.createRef(),this._searchRef=r.createRef(),this._defaultPreviewEmoji=this._uncompressedData.emojis[this.props.previewEmojiCodepoint],this._categories.unshift(this._recentlyUsedCategoryInitialValue),this._focusHelper=new _e(this._categories,this._uncompressedData.emojis,e.rowSize),this.state={activeCategory:this._categories[1],activeSkinTone:T[e.defaultSkinTone],ariaDescendantId:w(),categories:[this._searchCategoryInitialValue,...this._categories],focusRow:-1,focusCol:-1,recentlyUsed:[],previewSkinTone:void 0,query:"",searchResults:[],withDescription:!0},V.a.get("emojiPicker2").then(e=>{if(e&&"object"==typeof e){const{recentlyUsed:t=[],activeSkinToneId:s}=e,i="string"==typeof s&&T[s],o=Object.assign({},{recentlyUsed:Array.isArray(t)?Object(We.a)(t,e=>"string"==typeof e?e:void 0):[],activeCategory:this._categories[1]},i?{activeSkinTone:i}:{});this.setState(o),this._shouldUpdateScrollPosition=!0}})}componentWillUnmount(){const{activeSkinTone:{id:e},recentlyUsed:t}=this.state;V.a.set("emojiPicker2",{recentlyUsed:t,activeSkinToneId:e})}componentDidUpdate(e,t){const{categories:s,searchResults:i,recentlyUsed:o}=this.state,{rowSize:r}=this.props;if(t.searchResults!==i||t.recentlyUsed!==o){const e=Object.assign({},this._searchCategoryInitialValue,{emojis:i}),t=Object.assign({},this._recentlyUsedCategoryInitialValue,{emojis:o.length?[...o].reverse():[]});this.setState({activeCategory:this._getActiveCategory(),categories:[e,t].concat(this._staticCategories()),focusCategoryId:void 0,focusCol:-1,focusRow:-1,focusItem:void 0})}t.categories===s&&e.rowSize===r||(this._focusHelper=new _e(s,this._uncompressedData.emojis,r))}_getScrollParent(){if(!this._scrollParent){const e=X.a.findDOMNode(this._scrollRef.current);this._scrollParent=e instanceof window.Element?e:void 0}return this._scrollParent}render(){const{partialRender:e}=this.props,{recentlyUsed:t,searchResults:s}=this.state,i=Object.assign({},this._searchCategoryInitialValue,{emojis:s}),o=Object.assign({},this._recentlyUsedCategoryInitialValue,{emojis:t.length?[...t].reverse():[]}),n=this._staticCategories(),a=[i,o].concat(n),c=[i,o,n[0]];return r.createElement(ye.a,{onKeyDown:this._handleKeyDown,style:Je.root},r.createElement(se,{style:Je.searchSection},this._renderSearch()),r.createElement(se,{style:Je.anchorsSection},this._renderAnchors(a)),this._renderCategories(e?c:a),r.createElement(se,{style:Je.footerContainer,withTopBorder:!0},this._renderFooter()))}}c()(qe,"defaultProps",{defaultSkinTone:b,partialRender:!1,previewEmojiCodepoint:"👋",rowSize:9});const Je=u.a.create(e=>({root:{flex:1},categoriesContainer:{flexShrink:1,overflowY:"scroll"},searchSection:{borderTopLeftRadius:e.borderRadii.large,borderTopRightRadius:e.borderRadii.large,padding:0},anchorsSection:{padding:0,marginTop:e.spaces.xxSmall},footer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",overflow:"hidden"},footerContainer:{borderBottomLeftRadius:e.borderRadii.large,borderBottomRightRadius:e.borderRadii.large},emojiDescription:{paddingHorizontal:e.spaces.xSmall,maxWidth:"180px",flex:1},twemoji:{height:"2em",width:"2em"},skinTonePicker:{marginHorizontal:e.spaces.xSmall}}));var $e=qe;t.default=function(e){return r.createElement($e,o()({},e,{emojiInfo:n.default}))}},mtvn:function(e,t,s){"use strict";t.a=(e,t,s=1)=>{const i=[];for(let o=e;s>0?o<t:o>t;o+=s)i.push(o);return i}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.EmojiPicker.87a15235.js.map